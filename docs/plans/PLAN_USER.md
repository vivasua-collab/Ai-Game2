# 🗺️ ПЛАН ПАРАЛЛЕЛЬНОЙ РАЗРАБОТКИ — РУКОВОДСТВО

**Версия:** 1.0
**Создано:** 2026-03-01
**Статус:** Готов к выполнению

---

## 📋 Обзор

Параллельная разработка генераторов предметов двумя ИИ-агентами с последующим слиянием на GitHub.

---

## 👥 РАСПРЕДЕЛЕНИЕ АГЕНТОВ

### Агент 1 (Интегратор)
**Файлы:** `AGENT_1_PLAN.md`

**Задачи:**
1. Базовая инфраструктура (base-item-generator.ts)
2. Генератор имён с учётом рода
3. Генератор оружия (weapon-generator.ts)
4. Генератор экипировки (armor-generator.ts)
5. **Внедрение после слияния**

**Ветка Git:** `feature/item-generators-agent1`

---

### Агент 2
**Файлы:** `AGENT_2_PLAN.md`

**Задачи:**
1. Генератор аксессуаров (accessory-generator.ts)
2. Генератор расходников (consumable-generator.ts)
3. Генератор камней Ци (qi-stone-generator.ts)
4. Генератор зарядников (charger-generator.ts)

**Ветка Git:** `feature/item-generators-agent2`

---

## 📁 КЛЮЧЕВЫЕ ДОКУМЕНТЫ (общие для обоих)

Агенты ДОЛЖНЫ прочитать эти файлы перед началом работы:

| Файл | Назначение |
|------|------------|
| `docs/checkpoint29.md` | Основной план, интерфейсы, требования |
| `docs/id-system.md` | Система ID (префиксы WP, AR, AC, CS, QS, CH) |
| `docs/qi_stone.md` | Камни Ци (БЕЗ качества, только объём + тип) |
| `src/lib/generator/technique-generator.ts` | Референс для архитектуры |
| `src/lib/generator/technique-config.ts` | Референс для конфигурации |

---

## 🔄 ПОРЯДОК РАБОТЫ

### Этап 1: Параллельная разработка

```
┌─────────────────────────────────────────────────────────────────────────┐
│                         ЭТАП 1: ПАРАЛЛЕЛЬНАЯ РАБОТА                     │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   АГЕНТ 1                              АГЕНТ 2                          │
│   ─────────                            ─────────                        │
│   1. Читает документацию               1. Читает документацию           │
│   2. Создаёт ветку                     2. Создаёт ветку                 │
│   3. Базовая инфраструктура            3. accessory-generator.ts        │
│   4. name-generator.ts                 4. consumable-generator.ts       │
│   5. weapon-generator.ts               5. qi-stone-generator.ts         │
│   6. armor-generator.ts                6. charger-generator.ts          │
│   7. UI-панели                         7. UI-панели                     │
│   8. Push на GitHub                    8. Push на GitHub                │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Этап 2: Слияние

```
┌─────────────────────────────────────────────────────────────────────────┐
│                           ЭТАП 2: СЛИЯНИЕ                               │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   1. Создать Pull Request из ветки Агента 2                             │
│   2. Слить ветку Агента 2 в ветку Агента 1                              │
│   3. Разрешить конфликты (если есть)                                    │
│   4. Протестировать сборку                                              │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

### Этап 3: Внедрение (Агент 1)

```
┌─────────────────────────────────────────────────────────────────────────┐
│                        ЭТАП 3: ВНЕДРЕНИЕ (АГЕНТ 1)                      │
├─────────────────────────────────────────────────────────────────────────┤
│                                                                          │
│   1. Интеграция всех генераторов в меню "Создание"                      │
│   2. Проверка импортов                                                  │
│   3. Тестирование UI                                                    │
│   4. Push финальной версии                                              │
│   5. Создание Pull Request в main                                       │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 📋 ЧЕК-ЛИСТ ДЛЯ ПОЛЬЗОВАТЕЛЯ

### Перед запуском агентов:
- [ ] Убедиться, что `docs/checkpoint29.md` актуален
- [ ] Проверить доступ к GitHub
- [ ] Подготовить два отдельных чата/сессии для агентов

### После работы агентов:
- [ ] Проверить ветки на GitHub
- [ ] Создать PR из agent2 → agent1
- [ ] Слить и проверить конфликты
- [ ] Запустить Агента 1 для внедрения

### Финальная проверка:
- [ ] Все генераторы работают
- [ ] UI интегрирован
- [ ] Линтер не выдаёт ошибок
- [ ] PR в main создан

---

## 📁 СТРУКТУРА ФАЙЛОВ ПОСЛЕ ВЫПОЛНЕНИЯ

```
src/lib/generator/
├── base-item-generator.ts      ← Агент 1
├── name-generator.ts           ← Агент 1
├── item-config.ts              ← Агент 1
├── weapon-generator.ts         ← Агент 1
├── armor-generator.ts          ← Агент 1
├── accessory-generator.ts      ← Агент 2
├── consumable-generator.ts     ← Агент 2
├── qi-stone-generator.ts       ← Агент 2
├── charger-generator.ts        ← Агент 2
└── technique-generator.ts      ← (существует)

src/components/settings/
├── WeaponGeneratorPanel.tsx    ← Агент 1
├── ArmorGeneratorPanel.tsx     ← Агент 1
├── AccessoryGeneratorPanel.tsx ← Агент 2
├── ConsumableGeneratorPanel.tsx← Агент 2
├── QiStoneGeneratorPanel.tsx   ← Агент 2
├── ChargerGeneratorPanel.tsx   ← Агент 2
└── TechniqueGeneratorPanel.tsx ← (существует)
```

---

## ⚠️ ВАЖНЫЕ МОМЕНТЫ

1. **Лор первичен** — при противоречиях смотреть `docs/start_lore.md`
2. **Камни Ци БЕЗ качества** — только объём + тип (calm/chaotic)
3. **Зарядники ≤ 100%** — сохранение Ци обязательно
4. **Генераторы НЕ используют Event Bus** — работа в React среде
5. **upgradeFlags** — битовое поле 0-15 (4 бита)

---

## 🔗 СВЯЗАННЫЕ ФАЙЛЫ

- [AGENT_1_PLAN.md](./AGENT_1_PLAN.md) — План для Агента 1
- [AGENT_2_PLAN.md](./AGENT_2_PLAN.md) — План для Агента 2
- [../checkpoint29.md](../checkpoint29.md) — Основной чекпоинт

---

*Документ создан: 2026-03-01*
