# üÜî –°–∏—Å—Ç–µ–º–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤

**–í–µ—Ä—Å–∏—è:** 1.0  
**–°–æ–∑–¥–∞–Ω–æ:** 2026-02-27  
**–°—Ç–∞—Ç—É—Å:** –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ

---

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ ID –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ –ø—Ä–∏–Ω—Ü–∏–ø–µ **–ø—Ä–µ—Ñ–∏–∫—Å + —á–∏—Å–ª–æ–≤–æ–π —Å—á—ë—Ç—á–∏–∫**. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å ID –≤ —Ä–∞–º–∫–∞—Ö —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–æ–≤
- –ö–æ–Ω—Ç—Ä–æ–ª—å —Å—á—ë—Ç—á–∏–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏/—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞ –ø–æ ID

---

## 1Ô∏è‚É£ –§–û–†–ú–ê–¢ ID

### 1.1 –ë–∞–∑–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

```
{PREFIX}_{NUMBER}

PREFIX  ‚Äî –±—É–∫–≤–µ–Ω–Ω—ã–π –∫–æ–¥ —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞ (2-4 —Å–∏–º–≤–æ–ª–∞)
NUMBER  ‚Äî —á–∏—Å–ª–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å –≤–µ–¥—É—â–∏–º–∏ –Ω—É–ª—è–º–∏ (–æ—Ç 0001 –¥–æ 999999)
```

### 1.2 –ü—Ä–µ—Ñ–∏–∫—Å—ã –ø–æ —Ç–∏–ø–∞–º –æ–±—ä–µ–∫—Ç–æ–≤

| –¢–∏–ø –æ–±—ä–µ–∫—Ç–∞ | –ü—Ä–µ—Ñ–∏–∫—Å | –î–∏–∞–ø–∞–∑–æ–Ω | –ü—Ä–∏–º–µ—Ä |
|-------------|---------|----------|--------|
| –¢–µ—Ö–Ω–∏–∫–∞ (–±–æ–µ–≤–∞—è) | TC | TC_0001 - TC_999999 | TC_0512 |
| **–¢–µ—Ö–Ω–∏–∫–∞ (–∑–∞—â–∏—Ç–Ω–∞—è)** | **DF** | **DF_0001 - DF_999999** | **DF_0042** |
| –¢–µ—Ö–Ω–∏–∫–∞ (–∫—É–ª—å—Ç–∏–≤–∞—Ü–∏—è) | CU | CU_0001 - CU_999999 | CU_0010 |
| –¢–µ—Ö–Ω–∏–∫–∞ (–ø–æ–¥–¥–µ—Ä–∂–∫–∞) | SP | SP_0001 - SP_999999 | SP_0042 |
| –¢–µ—Ö–Ω–∏–∫–∞ (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ) | MV | MV_0001 - MV_999999 | MV_0003 |
| –¢–µ—Ö–Ω–∏–∫–∞ (–≤–æ—Å–ø—Ä–∏—è—Ç–∏–µ) | SN | SN_0001 - SN_999999 | SN_0008 |
| –¢–µ—Ö–Ω–∏–∫–∞ (–∏—Å—Ü–µ–ª–µ–Ω–∏–µ) | HL | HL_0001 - HL_999999 | HL_0015 |
| **–¢–µ—Ö–Ω–∏–∫–∞ (–ø—Ä–æ–∫–ª—è—Ç–∏–µ)** | **CR** | **CR_0001 - CR_999999** | **CR_0025** |
| **–¢–µ—Ö–Ω–∏–∫–∞ (–æ—Ç—Ä–∞–≤–ª–µ–Ω–∏–µ)** | **PN** | **PN_0001 - PN_999999** | **PN_0010** |
| –§–æ—Ä–º–∞—Ü–∏—è | FM | FM_0001 - FM_999999 | FM_0001 |
| –ü—Ä–µ–¥–º–µ—Ç (–º–∞—Ç–µ—Ä–∏–∞–ª) | MT | MT_0001 - MT_999999 | MT_0100 |
| –ü—Ä–µ–¥–º–µ—Ç (–∞—Ä—Ç–µ—Ñ–∞–∫—Ç) | AR | AR_0001 - AR_999999 | AR_0050 |
| –ü—Ä–µ–¥–º–µ—Ç (—Ä–∞—Å—Ö–æ–¥–Ω–∏–∫) | CS | CS_0001 - CS_999999 | CS_0200 |
| –ü—Ä–µ–¥–º–µ—Ç (—ç–∫–∏–ø–∏—Ä–æ–≤–∫–∞) | EQ | EQ_0001 - EQ_999999 | EQ_0030 |
| NPC | NPC | NPC_0001 - NPC_999999 | NPC_0042 |
| –ú–æ–Ω—Å—Ç—Ä | MON | MON_0001 - MON_999999 | MON_0100 |

### 1.3 –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π)

–î–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:

```
–¢–µ—Ö–Ω–∏–∫–∏:    T_{TYPE}_{NUMBER}
–ü—Ä–∏–º–µ—Ä:     T_combat_0512, T_cultivation_0010

–ü—Ä–µ–¥–º–µ—Ç—ã:   I_{TYPE}_{NUMBER}  
–ü—Ä–∏–º–µ—Ä:     I_artifact_0050, I_consumable_0200

–§–æ—Ä–º–∞—Ü–∏–∏:   FM_{NUMBER}
–ü—Ä–∏–º–µ—Ä:     FM_0001

NPC:        NPC_{NUMBER}
–ú–æ–Ω—Å—Ç—Ä—ã:    MON_{NUMBER}
```

---

## 2Ô∏è‚É£ –°–ò–°–¢–ï–ú–ê –°–ß–Å–¢–ß–ò–ö–û–í

### 2.1 –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤

```json
// data/presets/counters.json
{
  "version": "1.0",
  "updatedAt": "2026-02-27T12:00:00Z",
  "counters": {
    "T_combat": 1024,
    "T_cultivation": 512,
    "T_support": 256,
    "T_movement": 128,
    "T_sensory": 64,
    "T_healing": 32,
    "FM": 50,
    "I_material": 1024,
    "I_artifact": 512,
    "I_consumable": 256,
    "I_equipment": 128,
    "NPC": 100,
    "MON": 1000
  }
}
```

### 2.2 –ü—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å—á—ë—Ç—á–∏–∫–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     –ê–õ–ì–û–†–ò–¢–ú –ì–ï–ù–ï–†–ê–¶–ò–ò ID                                ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                          ‚îÇ
‚îÇ   1. –ß—Ç–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–∞ –∏–∑ counters.json                                   ‚îÇ
‚îÇ                    ‚Üì                                                     ‚îÇ
‚îÇ   2. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç —Å—á—ë—Ç—á–∏–∫–∞                                                 ‚îÇ
‚îÇ                    ‚Üì                                                     ‚îÇ
‚îÇ   3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è ID: {PREFIX}_{NUMBER:06d}                               ‚îÇ
‚îÇ                    ‚Üì                                                     ‚îÇ
‚îÇ   4. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª—ë–Ω–Ω–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞                                   ‚îÇ
‚îÇ                    ‚Üì                                                     ‚îÇ
‚îÇ   5. –í–æ–∑–≤—Ä–∞—Ç ID                                                         ‚îÇ
‚îÇ                                                                          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### 2.3 –ö–æ–Ω—Ç—Ä–æ–ª—å –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏

```typescript
interface CounterControl {
  // –ü—Ä–∏ –ø–æ–ª–Ω–æ–º —É–¥–∞–ª–µ–Ω–∏–∏ –±–∞–∑—ã:
  // –í–ê–†–ò–ê–ù–¢ A: –°–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–æ–≤ –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  resetToZero: boolean;  // true = –Ω–∞—á–∞—Ç—å —Å 1, false = –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å —Ç–µ–∫—É—â–µ–≥–æ
  
  // –í–ê–†–ò–ê–ù–¢ B: –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  preserveCounters: boolean;  // true = ID –Ω–µ –±—É–¥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è
}

// –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏
// –ü—Ä–∏ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–æ–≤—ã–µ ID –±—É–¥—É—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –Ω—É–º–µ—Ä–∞—Ü–∏—é
// –°—Ç–∞—Ä—ã–µ ID —Å—Ç–∞–Ω—É—Ç "–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–º–∏" - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
```

---

## 3Ô∏è‚É£ –û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø

### 3.1 –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–æ–≤

| –¢–∏–ø | –ú–∞–∫—Å. ID | –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ª–∏–º–∏—Ç |
|-----|----------|-------------------|
| –¢–µ—Ö–Ω–∏–∫–∏ | 999 999 | 2046 (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è) |
| –§–æ—Ä–º–∞—Ü–∏–∏ | 999 999 | ~1000 |
| –ü—Ä–µ–¥–º–µ—Ç—ã | 999 999 | ~2046 |
| NPC | 999 999 | ~100 000 |
| –ú–æ–Ω—Å—Ç—Ä—ã | 999 999 | ~100 000 |

### 3.2 –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ

–ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 999 999:
1. –°–∏—Å—Ç–µ–º–∞ –≤—ã–¥–∞—ë—Ç –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
3. –¢—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–µ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ

---

## 4Ô∏è‚É£ –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

### 4.1 –°–µ—Ä–≤–∏—Å ID

```typescript
// /src/lib/generator/id-service.ts

interface IdCounter {
  [key: string]: number;  // prefix -> counter
}

class IdService {
  private counters: IdCounter = {};
  private countersPath: string;
  
  async initialize(): Promise<void> {
    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—á—ë—Ç—á–∏–∫–æ–≤ –∏–∑ —Ñ–∞–π–ª–∞
  }
  
  generateId(prefix: string): string {
    const counter = (this.counters[prefix] || 0) + 1;
    this.counters[prefix] = counter;
    return `${prefix}_${counter.toString().padStart(6, '0')}`;
  }
  
  async save(): Promise<void> {
    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—á—ë—Ç—á–∏–∫–æ–≤ –≤ —Ñ–∞–π–ª
  }
  
  reset(prefix?: string): void {
    // –°–±—Ä–æ—Å —Å—á—ë—Ç—á–∏–∫–æ–≤
    if (prefix) {
      this.counters[prefix] = 0;
    } else {
      this.counters = {};
    }
  }
  
  preserveAndClear(): void {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—á—ë—Ç—á–∏–∫–∏, –æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
    // –°—á—ë—Ç—á–∏–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è ID
  }
}

export const idService = new IdService();
```

### 4.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º

```typescript
// –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–∏–∫–∏
const id = idService.generateId(`T_${type}`);

// –ü—Ä–∏–º–µ—Ä—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:
// T_combat_000001, T_combat_000002, ...
// T_cultivation_000001, T_cultivation_000002, ...
```

---

## 5Ô∏è‚É£ –ü–†–ò–ú–ï–†–´ –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Ø

### 5.1 –ü–µ—Ä–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è 1024 —Ç–µ—Ö–Ω–∏–∫ —É—Ä–æ–≤–Ω—è 1:
TC_000001, TC_000002, ..., TC_001024

–°—á—ë—Ç—á–∏–∫ TC = 1024
```

### 5.2 –î–æ–±–∞–≤–æ—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è

```
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –µ—â—ë 100 —Ç–µ—Ö–Ω–∏–∫:
TC_001025, TC_001026, ..., TC_001124

–°—á—ë—Ç—á–∏–∫ TC = 1124
```

### 5.3 –†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è

```
–ü–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ + —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è:

–í–ê–†–ò–ê–ù–¢ A (reset counters = true):
TC_000001, TC_000002, ...  (–∑–∞–Ω–æ–≤–æ —Å –Ω–∞—á–∞–ª–∞)

–í–ê–†–ò–ê–ù–¢ B (preserve counters = true):
TC_001125, TC_001126, ...  (–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –Ω—É–º–µ—Ä–∞—Ü–∏–∏)
```

---

*–î–æ–∫—É–º–µ–Ω—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ ID –¥–ª—è –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞*
