# ‚öîÔ∏è –°–∏—Å—Ç–µ–º–∞ –±–æ–µ–≤—ã—Ö —Ç–µ—Ö–Ω–∏–∫

**–í–µ—Ä—Å–∏—è:** 1.0  
**–°–æ–∑–¥–∞–Ω–æ:** 2026-02-12  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìã –û–±–∑–æ—Ä

–ë–æ–µ–≤—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ –¥–µ–ª—è—Ç—Å—è –Ω–∞ –¥–≤–µ –æ—Å–Ω–æ–≤–Ω—ã–µ –≥—Ä—É–ø–ø—ã:
1. **–ë–ª–∏–∂–Ω–∏–π –±–æ–π (Melee)** ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏
2. **–î–∞–ª—å–Ω–∏–π –±–æ–π (Ranged)** ‚Äî –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ —Å –ø–∞–¥–µ–Ω–∏–µ–º —É—Ä–æ–Ω–∞

---

## üéØ –¢–∏–ø—ã –±–æ–µ–≤—ã—Ö —Ç–µ—Ö–Ω–∏–∫

### 1. –ë–ª–∏–∂–Ω–∏–π –±–æ–π (Melee)

#### 1.1 –£—Å–∏–ª–µ–Ω–∏–µ —É–¥–∞—Ä–æ–≤ (Contact Strike)
–ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, —Ç—Ä–µ–±—É—é—â–∏–µ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∫–∞—Å–∞–Ω–∏—è —Ü–µ–ª–∏.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- `combatType: "melee_strike"`
- `contactRequired: true` ‚Äî —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å —Ü–µ–ª—å—é
- `range: 0-2 –º–µ—Ç—Ä–∞` ‚Äî –¥–∏—Å—Ç–∞–Ω—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
- –£—Ä–æ–Ω –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–∏–ª—ã –∏ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç–∏

**–ü—Ä–∏–º–µ—Ä—ã:**
- "–£—Å–∏–ª–µ–Ω–Ω—ã–π —É–¥–∞—Ä" ‚Äî –±–∞–∑–æ–≤—ã–π —É–¥–∞—Ä —Å –¶–∏
- "–û–≥–Ω–µ–Ω–Ω—ã–π —É–¥–∞—Ä" ‚Äî —É–¥–∞—Ä —Å –æ–≥–Ω–µ–Ω–Ω–æ–π –¶–∏
- "–õ–µ–¥—è–Ω–∞—è –ª–∞–¥–æ–Ω—å" ‚Äî –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞ —Ö–æ–ª–æ–¥–∞

#### 1.2 –£—Å–∏–ª–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è (Weapon Buff)
–í—Ä–µ–º–µ–Ω–Ω–æ–µ —É—Å–∏–ª–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è –¶–∏.

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- `combatType: "melee_weapon"`
- `contactRequired: false`
- `duration: —á–∏—Å–ª–æ –º–∏–Ω—É—Ç`
- –î–æ–±–∞–≤–ª—è–µ—Ç —É—Ä–æ–Ω –∫ –æ—Ä—É–∂–∏—é
- –ú–æ–∂–µ—Ç –¥–æ–±–∞–≤–ª—è—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç

**–ü—Ä–∏–º–µ—Ä—ã:**
- "–ü—ã–ª–∞—é—â–∏–π –∫–ª–∏–Ω–æ–∫" ‚Äî –æ—Ä—É–∂–∏–µ –Ω–∞–Ω–æ—Å–∏—Ç –æ–≥–Ω–µ–Ω–Ω—ã–π —É—Ä–æ–Ω
- "–ì—Ä–æ–º–æ–≤–æ–µ –ª–µ–∑–≤–∏–µ" ‚Äî –æ—Ä—É–∂–∏–µ –Ω–∞–Ω–æ—Å–∏—Ç —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —É—Ä–æ–Ω

---

### 2. –î–∞–ª—å–Ω–∏–π –±–æ–π (Ranged)

–¢–µ—Ö–Ω–∏–∫–∏, –≤—ã–ø—É—Å–∫–∞—é—â–∏–µ –¶–∏ –≤ –≤–∏–¥–µ —Å–Ω–∞—Ä—è–¥–æ–≤ –∏–ª–∏ –ª—É—á–µ–π.

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–∞–ª—å–Ω–æ—Å—Ç–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                          –î–ê–õ–¨–ù–û–°–¢–¨ –¢–ï–•–ù–ò–ö–ò                           ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                      ‚îÇ
‚îÇ   0–º        fullDamageRange           halfDamageRange      maxRange ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ                          ‚îÇ                  ‚îÇ    ‚îÇ
‚îÇ   ‚ñº              ‚ñº                          ‚ñº                  ‚ñº    ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§    ‚îÇ
‚îÇ   ‚îÇ   100%       ‚îÇ      –õ–∏–Ω–µ–π–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ    ‚îÇ   –†–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ   ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ   —É—Ä–æ–Ω–∞      ‚îÇ      100% ‚Üí 50%          ‚îÇ   50% ‚Üí 0%      ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ              ‚îÇ                          ‚îÇ                 ‚îÇ    ‚îÇ
‚îÇ   ‚îÇ‚óÑ‚îÄ‚îÄ –ó–û–ù–ê 1 ‚îÄ‚îÄ‚ñ∫‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ –ó–û–ù–ê 2 ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ‚óÑ‚îÄ‚îÄ –ó–û–ù–ê 3 ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ    ‚îÇ
‚îÇ   ‚îÇ  –ü–æ–ª–Ω—ã–π —É—Ä–æ–Ω ‚îÇ     –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —É—Ä–æ–Ω   ‚îÇ   –†–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ   ‚îÇ    ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

#### –§–æ—Ä–º—É–ª—ã —Ä–∞—Å—á—ë—Ç–∞ —É—Ä–æ–Ω–∞

**–ó–æ–Ω–∞ 1 (0 ‚Üí fullDamageRange):**
```
damageMultiplier = 1.0  // 100% —É—Ä–æ–Ω–∞
```

**–ó–æ–Ω–∞ 2 (fullDamageRange ‚Üí halfDamageRange):**
```
// –õ–∏–Ω–µ–π–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –æ—Ç 100% –¥–æ 50%
damageMultiplier = 1.0 - 0.5 * (distance - fullDamageRange) / (halfDamageRange - fullDamageRange)

// –ü—Ä–∏–º–µ—Ä:
// fullDamageRange = 10–º, halfDamageRange = 20–º
// –ù–∞ 15–º: damageMultiplier = 1.0 - 0.5 * (15-10)/(20-10) = 1.0 - 0.25 = 0.75 (75%)
```

**–ó–æ–Ω–∞ 3 (halfDamageRange ‚Üí maxRange):**
```
// –ë—ã—Å—Ç—Ä–æ–µ –ø–∞–¥–µ–Ω–∏–µ –æ—Ç 50% –¥–æ 0%
// –ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ
const decayStart = halfDamageRange;
const decayEnd = maxRange;
const progress = (distance - decayStart) / (decayEnd - decayStart);
damageMultiplier = 0.5 * (1 - progress * progress);  // –ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ

// –ü—Ä–∏–º–µ—Ä:
// halfDamageRange = 20–º, maxRange = 30–º
// –ù–∞ 25–º: progress = (25-20)/(30-20) = 0.5
//         damageMultiplier = 0.5 * (1 - 0.25) = 0.375 (37.5%)
// –ù–∞ 28–º: progress = 0.8
//         damageMultiplier = 0.5 * (1 - 0.64) = 0.18 (18%)
```

#### –¢–∏–ø—ã –¥–∞–ª—å–Ω–∏—Ö —Ç–µ—Ö–Ω–∏–∫

**2.1 –°–Ω–∞—Ä—è–¥ (Projectile)**
- `combatType: "ranged_projectile"`
- –î–≤–∏–∂–µ—Ç—Å—è –ø–æ –ø—Ä—è–º–æ–π
- –ú–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–ª–æ–Ω—ë–Ω (dodge chance)
- –í—Ä–µ–º—è –ø–æ–ª—ë—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è

**2.2 –õ—É—á (Beam)**
- `combatType: "ranged_beam"`
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ø–∞–¥–∞–Ω–∏–µ
- –¢—Ä—É–¥–Ω–µ–µ —É–∫–ª–æ–Ω–∏—Ç—å—Å—è
- –ú–æ–∂–µ—Ç –ø—Ä–æ–±–∏–≤–∞—Ç—å —Ü–µ–ª–∏

**2.3 –û–±–ª–∞—Å—Ç—å (Area)**
- `combatType: "ranged_aoe"`
- –°–æ–∑–¥–∞—ë—Ç –∑–æ–Ω—É –ø–æ—Ä–∞–∂–µ–Ω–∏—è
- –£—Ä–æ–Ω –≤—Å–µ–º –≤ –∑–æ–Ω–µ
- –û–±—ã—á–Ω–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —É—Ä–æ–Ω –≤ –∑–æ–Ω–µ

---

## üìä –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –±–æ–µ–≤—ã—Ö —Ç–µ—Ö–Ω–∏–∫

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å CombatTechniqueEffects

```typescript
interface CombatTechniqueEffects {
  // === –£–†–û–ù ===
  damage: number;              // –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω
  
  // === –¢–ò–ü –ë–û–ï–í–û–ô –¢–ï–•–ù–ò–ö–ò ===
  combatType: CombatTechniqueType;
  
  // === –î–ê–õ–¨–ù–û–°–¢–¨ (–¥–ª—è ranged) ===
  range?: {
    fullDamage: number;        // –î–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª–Ω–æ–≥–æ —É—Ä–æ–Ω–∞ (–º)
    halfDamage: number;        // –î–∞–ª—å–Ω–æ—Å—Ç—å 50% —É—Ä–æ–Ω–∞ (–º)
    max: number;               // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–∞–ª—å–Ω–æ—Å—Ç—å (–º) - –ø–æ—Å–ª–µ —É—Ä–æ–Ω = 0
  };
  
  // === –ö–û–ù–¢–ê–ö–¢ (–¥–ª—è melee) ===
  contactRequired?: boolean;   // –¢—Ä–µ–±—É–µ—Ç –ª–∏ –∫–æ–Ω—Ç–∞–∫—Ç–∞ —Å —Ü–µ–ª—å—é
  
  // === –û–ë–õ–ê–°–¢–¨ (–¥–ª—è AOE) ===
  aoeRadius?: number;          // –†–∞–¥–∏—É—Å –æ–±–ª–∞—Å—Ç–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏—è (–º)
  
  // === –í–†–ï–ú–ï–ù–ù–´–ï –≠–§–§–ï–ö–¢–´ ===
  duration?: number;           // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞—Ñ—Ñ–∞ (–º–∏–Ω)
  
  // === –≠–õ–ï–ú–ï–ù–¢–ê–õ–¨–ù–´–ï –≠–§–§–ï–ö–¢–´ ===
  elementalEffect?: {
    type: PresetElement;
    damagePerTurn?: number;    // –£—Ä–æ–Ω –∑–∞ —Ö–æ–¥ (DoT)
    duration: number;          // –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∞
  };
  
  // === –®–ê–ù–° –£–ö–õ–û–ù–ï–ù–ò–Ø ===
  dodgeChance?: number;        // –ë–∞–∑–æ–≤—ã–π —à–∞–Ω—Å —É–∫–ª–æ–Ω–µ–Ω–∏—è (–¥–ª—è projectile)
  
  // === –ü–†–û–ë–ò–¢–ò–ï ===
  penetration?: number;        // –ü—Ä–æ–±–∏—Ç–∏–µ –∑–∞—â–∏—Ç—ã (%)
}
```

### –¢–∏–ø—ã –±–æ–µ–≤—ã—Ö —Ç–µ—Ö–Ω–∏–∫

```typescript
type CombatTechniqueType = 
  | "melee_strike"       // –ö–æ–Ω—Ç–∞–∫—Ç–Ω—ã–π —É–¥–∞—Ä
  | "melee_weapon"       // –£—Å–∏–ª–µ–Ω–∏–µ –æ—Ä—É–∂–∏—è
  | "ranged_projectile"  // –°–Ω–∞—Ä—è–¥
  | "ranged_beam"        // –õ—É—á
  | "ranged_aoe";        // –û–±–ª–∞—Å—Ç—å
```

---

## üéÆ –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Ö–Ω–∏–∫

### –ë–ª–∏–∂–Ω–∏–π –±–æ–π

#### –£—Å–∏–ª–µ–Ω–Ω—ã–π —É–¥–∞—Ä (Melee Strike)
```typescript
{
  id: "reinforced_strike",
  name: "–£—Å–∏–ª–µ–Ω–Ω—ã–π —É–¥–∞—Ä",
  techniqueType: "combat",
  effects: {
    damage: 15,
    combatType: "melee_strike",
    contactRequired: true,
    range: { max: 2 }  // –î–æ 2 –º–µ—Ç—Ä–æ–≤
  }
}
```

#### –ü—ã–ª–∞—é—â–∏–π –∫–ª–∏–Ω–æ–∫ (Weapon Buff)
```typescript
{
  id: "blazing_blade",
  name: "–ü—ã–ª–∞—é—â–∏–π –∫–ª–∏–Ω–æ–∫",
  techniqueType: "combat",
  effects: {
    damage: 10,  // –î–æ–±–∞–≤–æ—á–Ω—ã–π —É—Ä–æ–Ω –∫ –æ—Ä—É–∂–∏—é
    combatType: "melee_weapon",
    duration: 5,  // 5 –º–∏–Ω—É—Ç
    elementalEffect: {
      type: "fire",
      damagePerTurn: 3,
      duration: 3
    }
  }
}
```

### –î–∞–ª—å–Ω–∏–π –±–æ–π

#### –û–≥–Ω–µ–Ω–Ω—ã–π —Å–Ω–∞—Ä—è–¥ (Ranged Projectile)
```typescript
{
  id: "fire_bullet",
  name: "–û–≥–Ω–µ–Ω–Ω—ã–π —Å–Ω–∞—Ä—è–¥",
  techniqueType: "combat",
  effects: {
    damage: 30,
    combatType: "ranged_projectile",
    range: {
      fullDamage: 15,   // 15–º - –ø–æ–ª–Ω—ã–π —É—Ä–æ–Ω
      halfDamage: 30,   // 30–º - 50% —É—Ä–æ–Ω–∞
      max: 45           // 45–º - —Ä–∞—Å—Å–µ–∏–≤–∞–Ω–∏–µ
    },
    dodgeChance: 0.2,   // 20% —à–∞–Ω—Å —É–∫–ª–æ–Ω–µ–Ω–∏—è
    elementalEffect: {
      type: "fire",
      damagePerTurn: 5,
      duration: 2
    }
  }
}
```

#### –õ–µ–¥—è–Ω–æ–π –ª—É—á (Ranged Beam)
```typescript
{
  id: "ice_beam",
  name: "–õ–µ–¥—è–Ω–æ–π –ª—É—á",
  techniqueType: "combat",
  effects: {
    damage: 40,
    combatType: "ranged_beam",
    range: {
      fullDamage: 20,
      halfDamage: 40,
      max: 60
    },
    dodgeChance: 0.05,  // 5% —à–∞–Ω—Å —É–∫–ª–æ–Ω–µ–Ω–∏—è (–ª—É—á —Ç—Ä—É–¥–Ω–æ —É–∫–ª–æ–Ω–∏—Ç—å—Å—è)
    penetration: 20,    // 20% –ø—Ä–æ–±–∏—Ç–∏—è
    elementalEffect: {
      type: "water",  // –õ—ë–¥ = –≤–æ–¥–∞
      damagePerTurn: 0,
      duration: 1  // –ó–∞–º–µ–¥–ª–µ–Ω–∏–µ
    }
  }
}
```

---

## üìê –§—É–Ω–∫—Ü–∏–∏ —Ä–∞—Å—á—ë—Ç–∞

### calculateDamageAtDistance()

```typescript
function calculateDamageAtDistance(
  baseDamage: number,
  distance: number,
  range: { fullDamage: number; halfDamage: number; max: number }
): { damage: number; multiplier: number; isZero: boolean } {
  
  // –ó–æ–Ω–∞ 1: –ü–æ–ª–Ω—ã–π —É—Ä–æ–Ω
  if (distance <= range.fullDamage) {
    return { damage: baseDamage, multiplier: 1.0, isZero: false };
  }
  
  // –ó–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–∞–ª—å–Ω–æ—Å—Ç–∏
  if (distance >= range.max) {
    return { damage: 0, multiplier: 0, isZero: true };
  }
  
  // –ó–æ–Ω–∞ 2: –õ–∏–Ω–µ–π–Ω–æ–µ –ø–∞–¥–µ–Ω–∏–µ –¥–æ 50%
  if (distance <= range.halfDamage) {
    const multiplier = 1.0 - 0.5 * 
      (distance - range.fullDamage) / 
      (range.halfDamage - range.fullDamage);
    return { 
      damage: Math.floor(baseDamage * multiplier), 
      multiplier, 
      isZero: false 
    };
  }
  
  // –ó–æ–Ω–∞ 3: –ö–≤–∞–¥—Ä–∞—Ç–∏—á–Ω–æ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ –æ—Ç 50% –¥–æ 0%
  const progress = 
    (distance - range.halfDamage) / 
    (range.max - range.halfDamage);
  const multiplier = 0.5 * (1 - progress * progress);
  return { 
    damage: Math.floor(baseDamage * multiplier), 
    multiplier, 
    isZero: false 
  };
}
```

### calculateFinalDamage()

```typescript
function calculateFinalDamage(
  technique: TechniquePreset,
  character: Character,
  target: CombatTarget,
  distance: number
): number {
  
  // –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω —Ç–µ—Ö–Ω–∏–∫–∏
  let damage = technique.effects.damage || 0;
  
  // –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
  const scaling = technique.scaling || {};
  if (scaling.strength && character.strength > 10) {
    damage *= 1 + (character.strength - 10) * scaling.strength;
  }
  if (scaling.conductivity && character.conductivity > 0) {
    damage *= 1 + character.conductivity * scaling.conductivity;
  }
  
  // –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ —Ç–µ—Ö–Ω–∏–∫–∏
  const mastery = target.mastery || 0; // 0-100%
  damage *= 1 + mastery * technique.masteryBonus / 100;
  
  // –®—Ç—Ä–∞—Ñ –∑–∞ –¥–∞–ª—å–Ω–æ—Å—Ç—å (—Ç–æ–ª—å–∫–æ –¥–ª—è ranged)
  if (technique.effects.combatType?.startsWith('ranged') && technique.effects.range) {
    const result = calculateDamageAtDistance(
      damage, 
      distance, 
      technique.effects.range
    );
    damage = result.damage;
  }
  
  // –ü—Ä–æ–±–∏—Ç–∏–µ –∑–∞—â–∏—Ç—ã
  const penetration = technique.effects.penetration || 0;
  const armor = target.armor || 0;
  const effectiveArmor = armor * (1 - penetration / 100);
  damage = Math.max(0, damage - effectiveArmor);
  
  return Math.floor(damage);
}
```

---

## üìä –¢–∞–±–ª–∏—Ü–∞ –¥–∞–ª—å–Ω–æ—Å—Ç–∏ (–ø—Ä–∏–º–µ—Ä)

–î–ª—è —Ç–µ—Ö–Ω–∏–∫–∏ —Å `range: { fullDamage: 10, halfDamage: 20, max: 30 }`:

| –î–∏—Å—Ç–∞–Ω—Ü–∏—è | –ú–Ω–æ–∂–∏—Ç–µ–ª—å | –£—Ä–æ–Ω (–±–∞–∑–∞ 100) |
|-----------|-----------|-----------------|
| 0-10–º     | 100%      | 100             |
| 12–º       | 90%       | 90              |
| 15–º       | 75%       | 75              |
| 18–º       | 60%       | 60              |
| 20–º       | 50%       | 50              |
| 22–º       | 42%       | 42              |
| 25–º       | 31%       | 31              |
| 28–º       | 16%       | 16              |
| 30–º+      | 0%        | 0               |

---

## üéØ –ë–∞–ª–∞–Ω—Å

### –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —É—Ä–æ–Ω–∞

| –¢–∏–ø | –ë–∞–∑–æ–≤—ã–π —É—Ä–æ–Ω | –î–∞–ª—å–Ω–æ—Å—Ç—å | –°–ª–æ–∂–Ω–æ—Å—Ç—å |
|-----|--------------|-----------|-----------|
| Melee Strike | 15-30 | 0-2–º | –ù–∏–∑–∫–∞—è |
| Melee Weapon | +10-20 –∫ –æ—Ä—É–∂–∏—é | N/A | –ù–∏–∑–∫–∞—è |
| Ranged Projectile | 25-50 | 30-60–º | –°—Ä–µ–¥–Ω—è—è |
| Ranged Beam | 35-70 | 40-80–º | –í—ã—Å–æ–∫–∞—è |
| Ranged AOE | 20-40 | 20-50–º | –°—Ä–µ–¥–Ω—è—è |

### –ó–∞—Ç—Ä–∞—Ç—ã –¶–∏

| –¢–∏–ø —Ç–µ—Ö–Ω–∏–∫–∏ | –ë–∞–∑–æ–≤–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å |
|-------------|-------------------|
| Melee Strike | 5-15 –¶–∏ |
| Melee Weapon | 10-25 –¶–∏ |
| Ranged Projectile | 15-30 –¶–∏ |
| Ranged Beam | 25-50 –¶–∏ |
| Ranged AOE | 30-60 –¶–∏ |

---

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [docs/start_lore.md](./start_lore.md) ‚Äî –õ–æ—Ä –º–∏—Ä–∞ –∫—É–ª—å—Ç–∏–≤–∞—Ü–∏–∏
- [src/data/presets/technique-presets.ts](../src/data/presets/technique-presets.ts) ‚Äî –ü—Ä–µ—Å–µ—Ç—ã —Ç–µ—Ö–Ω–∏–∫
- [src/types/game.ts](../src/types/game.ts) ‚Äî –¢–∏–ø—ã –∏–≥—Ä—ã

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2026-02-12*
