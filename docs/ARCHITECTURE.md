# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Cultivation World Simulator

> –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Phaser 3.
> –í–µ—Ä—Å–∏—è: 9 | –ì–æ–¥: 2026

---

## üìê –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           CLIENT (Browser)                          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ                    page.tsx (Main Entry)                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ                     Auto-init Session                        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ                              ‚îÇ                                      ‚îÇ
‚îÇ         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                ‚îÇ
‚îÇ         ‚ñº                    ‚ñº                    ‚ñº                ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê      ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê        ‚îÇ
‚îÇ  ‚îÇ PhaserGame  ‚îÇ      ‚îÇ  ChatPanel  ‚îÇ      ‚îÇActionButtons‚îÇ        ‚îÇ
‚îÇ  ‚îÇ   (2D)      ‚îÇ      ‚îÇ   (Chat)    ‚îÇ      ‚îÇ (Rest/Stats)‚îÇ        ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò      ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò        ‚îÇ
‚îÇ         ‚îÇ                    ‚îÇ                    ‚îÇ                ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                ‚îÇ
‚îÇ                              ‚ñº                                      ‚îÇ
‚îÇ                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                              ‚îÇ
‚îÇ                   ‚îÇ  game.store.ts  ‚îÇ  ‚Üê Zustand State             ‚îÇ
‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ HTTP
                             ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                        SERVER (Next.js API)                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                 ‚îÇ
‚îÇ  ‚îÇ/api/game/   ‚îÇ  ‚îÇ/api/rest    ‚îÇ  ‚îÇ/api/        ‚îÇ                 ‚îÇ
‚îÇ  ‚îÇstart,move   ‚îÇ  ‚îÇ             ‚îÇ  ‚îÇtechnique/use‚îÇ                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                 ‚îÇ
‚îÇ         ‚îÇ                ‚îÇ                ‚îÇ                         ‚îÇ
‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                         ‚îÇ
‚îÇ                          ‚ñº                                          ‚îÇ
‚îÇ                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ
‚îÇ                   ‚îÇ  Services   ‚îÇ                                   ‚îÇ
‚îÇ                   ‚îÇ  + Presets  ‚îÇ                                   ‚îÇ
‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
‚îÇ                          ‚ñº                                          ‚îÇ
‚îÇ                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê                                   ‚îÇ
‚îÇ                   ‚îÇ   Prisma    ‚îÇ                                   ‚îÇ
‚îÇ                   ‚îÇ   (SQLite)  ‚îÇ                                   ‚îÇ
‚îÇ                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò                                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîÑ –ü–æ—Ç–æ–∫ –∑–∞–ø—É—Å–∫–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                     Page Load                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
                           ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Check localStorage (session ID)                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚îÇ
           ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
           ‚ñº                               ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Session Found     ‚îÇ         ‚îÇ   No Session        ‚îÇ
‚îÇ                     ‚îÇ         ‚îÇ                     ‚îÇ
‚îÇ   loadGame(id)      ‚îÇ         ‚îÇ   startGame(1)      ‚îÇ
‚îÇ         ‚îÇ           ‚îÇ         ‚îÇ   (variant 1: sect) ‚îÇ
‚îÇ         ‚ñº           ‚îÇ         ‚îÇ         ‚îÇ           ‚îÇ
‚îÇ   Validate Session  ‚îÇ         ‚îÇ         ‚ñº           ‚îÇ
‚îÇ         ‚îÇ           ‚îÇ         ‚îÇ   Create Character  ‚îÇ
‚îÇ         ‚ñº           ‚îÇ         ‚îÇ   Create Session    ‚îÇ
‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê     ‚îÇ         ‚îÇ   Create Location   ‚îÇ
‚îÇ   ‚ñº           ‚ñº     ‚îÇ         ‚îÇ   Create Techniques ‚îÇ
‚îÇ Valid      Invalid  ‚îÇ         ‚îÇ         ‚îÇ           ‚îÇ
‚îÇ   ‚îÇ           ‚îÇ     ‚îÇ         ‚îÇ         ‚ñº           ‚îÇ
‚îÇ   ‚ñº           ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   Save session ID   ‚îÇ
‚îÇ 2D Mode           New Game   ‚îÇ   to localStorage    ‚îÇ
‚îÇ                           ‚îÇ   ‚îÇ         ‚îÇ           ‚îÇ
‚îÇ                           ‚îî‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îÇ                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
                                          ‚ñº
                              ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                              ‚îÇ   2D Mode Active    ‚îÇ
                              ‚îÇ   - PhaserGame      ‚îÇ
                              ‚îÇ   - ChatPanel       ‚îÇ
                              ‚îÇ   - ActionButtons   ‚îÇ
                              ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª–µ–π

### `/src/app/` - Next.js App Router

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `page.tsx` | –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã |
| `layout.tsx` | –ö–æ—Ä–Ω–µ–≤–æ–π layout |
| `api/game/start/route.ts` | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã |
| `api/game/state/route.ts` | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è |
| `api/game/move/route.ts` | –î–≤–∏–∂–µ–Ω–∏–µ + –≤—Ä–µ–º—è + –ø–∞—Å—Å–∏–≤–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¶–∏ |
| `api/rest/route.ts` | –ú–µ–¥–∏—Ç–∞—Ü–∏—è, –æ—Ç–¥—ã—Ö, —Å–æ–Ω |
| `api/technique/use/route.ts` | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫–∏ |
| `api/chat/route.ts` | –ß–∞—Ç —Å LLM |

### `/src/components/game/` - –ò–≥—Ä–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `PhaserGame.tsx` | 2D –∏–≥—Ä–∞ –Ω–∞ Phaser 3 |
| `ChatPanel.tsx` | –ß–∞—Ç + —Å—Ç–∞—Ç—É—Å –±–∞—Ä |
| `RestDialog.tsx` | –ï–¥–∏–Ω—ã–π –¥–∏–∞–ª–æ–≥ (–ú–µ–¥–∏—Ç–∞—Ü–∏—è, –û—Ç–¥—ã—Ö, –°–æ–Ω) |
| `StatusDialog.tsx` | –ü–æ–ª–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø–µ—Ä—Å–æ–Ω–∞–∂–∞ |
| `TechniquesDialog.tsx` | –ü—Ä–æ—Å–º–æ—Ç—Ä –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫ |
| `ActionButtons.tsx` | –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π |

### `/src/data/presets/` - –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `base-preset.ts` | –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å BasePreset |
| `technique-presets.ts` | –ü—Ä–µ—Å–µ—Ç—ã —Ç–µ—Ö–Ω–∏–∫ (13 —à—Ç) |
| `skill-presets.ts` | –ü—Ä–µ—Å–µ—Ç—ã –Ω–∞–≤—ã–∫–æ–≤ –∫—É–ª—å—Ç–∏–≤–∞—Ü–∏–∏ (9 —à—Ç) |
| `formation-presets.ts` | –ü—Ä–µ—Å–µ—Ç—ã —Ñ–æ—Ä–º–∞—Ü–∏–π (8 —à—Ç) |
| `item-presets.ts` | –ü—Ä–µ—Å–µ—Ç—ã –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (15 —à—Ç) |
| `character-presets.ts` | –°—Ç–∞—Ä—Ç–æ–≤—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏ (6 —à—Ç) |
| `index.ts` | –ï–¥–∏–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç + —É—Ç–∏–ª–∏—Ç—ã |

### `/src/lib/game/` - –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `constants.ts` | –í—Å–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏–≥—Ä—ã |
| `qi-system.ts` | –ú–µ–¥–∏—Ç–∞—Ü–∏—è, –ø—Ä–æ—Ä—ã–≤ (—Å–µ—Ä–≤–µ—Ä) |
| `qi-shared.ts` | –†–∞—Å—á—ë—Ç—ã –¶–∏ (–∫–ª–∏–µ–Ω—Ç/—Å–µ—Ä–≤–µ—Ä) |
| `fatigue-system.ts` | –°–∏—Å—Ç–µ–º–∞ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ |
| `techniques.ts` | –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏ |
| `time-system.ts` | –°–∏—Å—Ç–µ–º–∞ —Ç–∏–∫–æ–≤ –≤—Ä–µ–º–µ–Ω–∏ |
| `time-db.ts` | –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤ –ë–î |
| `world-coordinates.ts` | 3D –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –º–∏—Ä–∞ |

### `/src/stores/` - Zustand —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

| –§–∞–π–ª | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|------|------------|
| `game.store.ts` | –ì–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã |

**–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã:**
- `useGameCharacter()` - –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
- `useGameLocation()` - —Ç–µ–∫—É—â–∞—è –ª–æ–∫–∞—Ü–∏—è
- `useGameMessages()` - —Å–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞
- `useGameLoading()` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏
- `useGameActions()` - –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è (loadState, startGame, etc.)

---

## üéÆ Phaser 3 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

```typescript
const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,           // WebGL –∏–ª–∏ Canvas
  width: 900,
  height: 550,
  physics: {
    default: 'arcade',         // –õ—ë–≥–∫–∞—è 2D —Ñ–∏–∑–∏–∫–∞
    arcade: { gravity: { x: 0, y: 0 } }
  },
  scene: [GameSceneConfig],
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH
  }
};
```

### SSR —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

```typescript
// –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –≤ useEffect
useEffect(() => {
  const initGame = async () => {
    const Phaser = (await import('phaser')).default;
    new Phaser.Game(config);
  };
  initGame();
}, []);
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç—É—Ä (–±–µ–∑ –∞—Å—Å–µ—Ç–æ–≤)

```typescript
// –¢–µ–∫—Å—Ç—É—Ä—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
const graphics = this.make.graphics();
graphics.fillStyle(0x4ade80);
graphics.fillCircle(24, 24, 24);
graphics.generateTexture('player', 48, 48);
```

üìñ **–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏:** [docs/PHASER_STACK.md](./PHASER_STACK.md)

---

## üîå API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### –ò–≥—Ä–æ–≤—ã–µ

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/api/game/start` | POST | –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É |
| `/api/game/state` | GET | –ü–æ–ª—É—á–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ |
| `/api/game/move` | POST | –î–≤–∏–∂–µ–Ω–∏–µ + –≤—Ä–µ–º—è + –ø–∞—Å—Å–∏–≤–Ω–æ–µ –¶–∏ |
| `/api/rest` | POST | –ú–µ–¥–∏—Ç–∞—Ü–∏—è, –æ—Ç–¥—ã—Ö, —Å–æ–Ω |
| `/api/technique/use` | POST | –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Ö–Ω–∏–∫—É |
| `/api/chat` | POST | –î–µ–π—Å—Ç–≤–∏–µ + LLM –æ—Ç–≤–µ—Ç |

### –°–∏—Å—Ç–µ–º–Ω—ã–µ

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|----------|-------|----------|
| `/api/database/migrate` | GET/POST | –°—Ç–∞—Ç—É—Å/–º–∏–≥—Ä–∞—Ü–∏—è –ë–î |
| `/api/llm/status` | GET | –°—Ç–∞—Ç—É—Å LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ |
| `/api/settings/llm` | GET/POST | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ LLM |

---

## üß© –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Å–µ—Ç–æ–≤

### –ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```typescript
interface BasePreset {
  id: string;
  name: string;
  nameEn?: string;
  description: string;
  category: PresetCategory;  // basic | advanced | master | legendary
  rarity: PresetRarity;      // common | uncommon | rare | legendary
  requirements?: PresetRequirements;
  cost?: PresetCost;
  sources?: PresetSource[];
  icon?: string;
}
```

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –¶–≤–µ—Ç UI |
|-----------|----------|---------|
| basic | –ë–∞–∑–æ–≤—ã–µ –ø—Ä–µ—Å–µ—Ç—ã | text-gray-400 |
| advanced | –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ | text-blue-400 |
| master | –ú–∞—Å—Ç–µ—Ä—Å–∫–∏–µ | text-purple-400 |
| legendary | –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–µ | text-amber-400 |

### –£—Ç–∏–ª–∏—Ç—ã

```typescript
getAllPresets()          // –í—Å–µ –ø—Ä–µ—Å–µ—Ç—ã –≤ –æ–¥–Ω–æ–º –º–∞—Å—Å–∏–≤–µ
getStarterPack(id)       // –°—Ç–∞—Ä—Ç–æ–≤—ã–π –Ω–∞–±–æ—Ä –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
findPresetById(id)       // –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–æ–∏—Å–∫
filterByCategory(cat)    // –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
filterByRarity(rarity)   // –§–∏–ª—å—Ç—Ä –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
```

---

## üìä –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```
page.tsx
    ‚îÇ
    ‚îú‚îÄ‚îÄ PhaserGame.tsx
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îî‚îÄ‚îÄ Phaser 3 (dynamic import)
    ‚îÇ               ‚îÇ
    ‚îÇ               ‚îú‚îÄ‚îÄ GameScene (movement)
    ‚îÇ               ‚îú‚îÄ‚îÄ Minimap
    ‚îÇ               ‚îî‚îÄ‚îÄ UI Overlay
    ‚îÇ
    ‚îú‚îÄ‚îÄ ChatPanel.tsx
    ‚îÇ       ‚îÇ
    ‚îÇ       ‚îú‚îÄ‚îÄ CompactStatusBar
    ‚îÇ       ‚îú‚îÄ‚îÄ MessageList
    ‚îÇ       ‚îî‚îÄ‚îÄ InputField
    ‚îÇ
    ‚îî‚îÄ‚îÄ ActionButtons.tsx
            ‚îÇ
            ‚îú‚îÄ‚îÄ StatusDialog.tsx
            ‚îÇ       ‚îî‚îÄ‚îÄ 4 –≤–∫–ª–∞–¥–∫–∏: –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –ö—É–ª—å—Ç–∏–≤–∞—Ü–∏—è, –°–æ—Å—Ç–æ—è–Ω–∏–µ, –í—Ä–µ–º—è
            ‚îÇ
            ‚îú‚îÄ‚îÄ RestDialog.tsx
            ‚îÇ       ‚îî‚îÄ‚îÄ 3 –≤–∫–ª–∞–¥–∫–∏: –ú–µ–¥–∏—Ç–∞—Ü–∏—è, –û—Ç–¥—ã—Ö, –°–æ–Ω
            ‚îÇ
            ‚îî‚îÄ‚îÄ TechniquesDialog.tsx
                    ‚îî‚îÄ‚îÄ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Ç–∏–ø—É, –∫–Ω–æ–ø–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
```

---

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏—è

1. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ `ActionButtons.tsx`
2. –°–æ–∑–¥–∞—Ç—å –¥–∏–∞–ª–æ–≥ –≤ `components/game/NewDialog.tsx`
3. –°–æ–∑–¥–∞—Ç—å API —ç–Ω–¥–ø–æ–∏–Ω—Ç –µ—Å–ª–∏ –Ω—É–∂–µ–Ω —Ä–∞—Å—á—ë—Ç

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–µ—Å–µ—Ç–∞

1. –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª: technique/skill/formation/item/character-presets.ts
2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–µ—Å–µ—Ç —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º ID
3. –£–∫–∞–∑–∞—Ç—å category, rarity, requirements

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ API

1. –°–æ–∑–¥–∞—Ç—å `src/app/api/new-action/route.ts`
2. –î–æ–±–∞–≤–∏—Ç—å Zod –≤–∞–ª–∏–¥–∞—Ü–∏—é
3. –í–µ—Ä–Ω—É—Ç—å `character` –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏

---

*–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∞–∫—Ç—É–∞–ª—å–Ω–∞ –¥–ª—è –≤–µ—Ä—Å–∏–∏ 9 (2026-02-28)*
