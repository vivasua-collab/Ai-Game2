# ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Cultivation World Simulator

> ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾Ğµ Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ñ‹ Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Phaser 3.
> Ğ’ĞµÑ€ÑĞ¸Ñ: 12 | Ğ“Ğ¾Ğ´: 2026

---

## ğŸ“ ĞĞ±Ñ‰Ğ°Ñ Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CLIENT (Browser)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    page.tsx (Main Entry)                    â”‚   â”‚
â”‚  â”‚                     Auto-init Session                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                      â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚         â–¼                    â–¼                    â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ PhaserGame  â”‚      â”‚  ChatPanel  â”‚      â”‚ActionButtonsâ”‚        â”‚
â”‚  â”‚   (2D)      â”‚      â”‚   (Chat)    â”‚      â”‚ (Rest/Stats)â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â”‚                    â”‚                    â”‚                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚                              â–¼                                      â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚                   â”‚  game.store.ts  â”‚  â† Zustand State             â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚ HTTP
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVER (Next.js API)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚/api/game/   â”‚  â”‚/api/rest    â”‚  â”‚/api/        â”‚                 â”‚
â”‚  â”‚start,move   â”‚  â”‚             â”‚  â”‚technique/useâ”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                â”‚                â”‚                         â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                          â–¼                                          â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚           â”‚      TruthSystem             â”‚  â† ĞŸĞĞœĞ¯Ğ¢Ğ¬ ĞŸĞ•Ğ Ğ’Ğ˜Ğ§ĞĞ!     â”‚
â”‚           â”‚  (Active Sessions in Memory) â”‚                          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                          â”‚                                          â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚         â–¼                â–¼                â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚ Character â”‚   â”‚ Techniquesâ”‚   â”‚ Inventory â”‚                    â”‚
â”‚   â”‚  (mem)    â”‚   â”‚   (mem)   â”‚   â”‚   (mem)   â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                          â”‚                                          â”‚
â”‚                          â–¼ ĞĞ²Ñ‚Ğ¾ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ / ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ     â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚                   â”‚   Prisma    â”‚                                   â”‚
â”‚                   â”‚   (SQLite)  â”‚                                   â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ˜ÑÑ‚Ğ¸Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸ (Truth System)

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0 | **Ğ”Ğ°Ñ‚Ğ°:** 2026-02-28

### ĞŸÑ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Ğ˜Ğ•Ğ ĞĞ Ğ¥Ğ˜Ğ¯ Ğ˜Ğ¡Ğ¢ĞĞ§ĞĞ˜ĞšĞĞ’ Ğ˜Ğ¡Ğ¢Ğ˜ĞĞ«                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚   1. ĞŸĞĞœĞ¯Ğ¢Ğ¬ (TruthSystem) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ĞŸĞ•Ğ Ğ’Ğ˜Ğ§ĞĞ«Ğ™         â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ ĞĞºÑ‚Ğ¸Ğ²Ğ½Ğ°Ñ ÑĞµÑÑĞ¸Ñ                                         â”‚
â”‚      â”œâ”€ Ğ’ÑĞµ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹ Ğ¿Ñ€Ğ¾Ğ¸ÑÑ…Ğ¾Ğ´ÑÑ‚ Ğ·Ğ´ĞµÑÑŒ                            â”‚
â”‚      â””â”€ ĞœĞ³Ğ½Ğ¾Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼                              â”‚
â”‚                                                                 â”‚
â”‚   2. Ğ‘Ğ” (Prisma/SQLite) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Ğ’Ğ¢ĞĞ Ğ˜Ğ§ĞĞ«Ğ™          â”‚
â”‚      â”‚                                                          â”‚
â”‚      â”œâ”€ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞµÑÑĞ¸Ğ¸ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ                              â”‚
â”‚      â”œâ”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ñ€Ğ¸ ÑĞ¼ĞµĞ½Ğµ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸                            â”‚
â”‚      â”œâ”€ ĞĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…               â”‚
â”‚      â””â”€ ĞŸĞµÑ€Ğ¸Ğ¾Ğ´Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ°Ğ²Ñ‚Ğ¾ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ                            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ–Ğ¸Ğ·Ğ½ĞµĞ½Ğ½Ñ‹Ğ¹ Ñ†Ğ¸ĞºĞ» ÑĞµÑÑĞ¸Ğ¸

```
START SESSION                    ACTIVE SESSION                   END SESSION
    â”‚                                  â”‚                               â”‚
    â–¼                                  â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°    â”‚                 â”‚ Ğ Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹ Ğ²   â”‚               â”‚ Ğ¤Ğ¸Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ   â”‚
â”‚ Ğ¸Ğ· Ğ‘Ğ” Ğ²     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ  â”‚
â”‚ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ      â”‚                 â”‚             â”‚               â”‚ Ğ² Ğ‘Ğ”        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                  â–¼                  â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ĞĞ²Ñ‚Ğ¾ÑĞ¾Ñ…Ñ€Ğ°Ğ½.â”‚      â”‚ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡.   â”‚      â”‚ Ğ¡Ğ¼ĞµĞ½Ğ°     â”‚
              â”‚ (1 Ğ¼Ğ¸Ğ½)   â”‚      â”‚ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ   â”‚      â”‚ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸   â”‚
              â”‚           â”‚      â”‚ (Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸) â”‚      â”‚           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                  â”‚                  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ  â”‚
                              â”‚ Ğ² Ğ‘Ğ”        â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ (Ğ½ĞµĞ¼ĞµĞ´Ğ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ)

| Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ |
|---------|----------|
| ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ | `db.characterTechnique.create()` + memory |
| ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ° | `db.inventoryItem.create()` + memory |
| Ğ¡Ğ¼ĞµĞ½Ğ° Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ â†’ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ½Ğ¾Ğ²Ğ¾Ğ¹ |
| ĞŸÑ€Ğ¾Ñ€Ñ‹Ğ² ÑƒÑ€Ğ¾Ğ²Ğ½Ñ | `applyBreakthrough()` - Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğµ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° |
| ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ | `updateConductivity()` - ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ğ² Ğ‘Ğ” |
| Ğ—Ğ°Ğ²ĞµÑ€ÑˆĞµĞ½Ğ¸Ğµ Ğ±Ğ¾Ñ | Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° |

### Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ API routes (Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¾ 2026-02-28)

| API Route | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ | ĞœĞµÑ‚Ğ¾Ğ´Ñ‹ TruthSystem |
|-----------|--------|-------------------|
| `/api/game/start` | âœ… | `loadSession()` Ğ¿Ğ¾ÑĞ»Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ |
| `/api/game/state` | âœ… | `getSessionState()` â†’ fallback Ğ‘Ğ” |
| `/api/game/save` | âœ… | POST: `saveToDatabase()`, `quickSave()` |
| `/api/rest` | âœ… | `updateCharacter()`, `advanceTime()` |
| `/api/meditation` | âœ… | `addQi()`, `applyBreakthrough()`, `updateConductivity()` |
| `/api/technique/use` | âœ… | `spendQi()`, `updateFatigue()` |

### API TruthSystem

```typescript
// Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞµÑÑĞ¸Ğ¸
await TruthSystem.loadSession(sessionId);

// ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ
const state = TruthSystem.getSessionState(sessionId);
const character = TruthSystem.getCharacter(sessionId);

// ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ)
TruthSystem.updateCharacter(sessionId, { currentQi: 500 });

// ĞĞ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ Ñ Ğ¦Ğ¸
TruthSystem.addQi(sessionId, 100);
TruthSystem.spendQi(sessionId, 50);

// ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ (Ğ‘Ğ” + Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ)
await TruthSystem.addTechnique(sessionId, techniqueData);
await TruthSystem.addInventoryItem(sessionId, itemData);

// Ğ¡Ğ¼ĞµĞ½Ğ° Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ğ¸ (Ğ‘Ğ” + Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ)
await TruthSystem.changeLocation(sessionId, newLocationId);

// Ğ’Ñ€ĞµĞ¼Ñ
TruthSystem.advanceTime(sessionId, 60); // +60 Ğ¼Ğ¸Ğ½ÑƒÑ‚

// Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ
await TruthSystem.saveToDatabase(sessionId);
await TruthSystem.quickSave(sessionId);

// Ğ’Ñ‹Ğ³Ñ€ÑƒĞ·ĞºĞ°
await TruthSystem.unloadSession(sessionId);
```

### Ğ¤Ğ°Ğ¹Ğ»Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `src/lib/game/truth-system.ts` | Ğ¯Ğ´Ñ€Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹, singleton ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞµÑÑĞ¸ÑĞ¼Ğ¸ |

---

## ğŸ”„ ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Page Load                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Check localStorage (session ID)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Session Found     â”‚         â”‚   No Session        â”‚
â”‚                     â”‚         â”‚                     â”‚
â”‚   loadGame(id)      â”‚         â”‚   startGame(1)      â”‚
â”‚         â”‚           â”‚         â”‚   (variant 1: sect) â”‚
â”‚         â–¼           â”‚         â”‚         â”‚           â”‚
â”‚   Validate Session  â”‚         â”‚         â–¼           â”‚
â”‚         â”‚           â”‚         â”‚   Create Character  â”‚
â”‚         â–¼           â”‚         â”‚   Create Session    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”     â”‚         â”‚   Create Location   â”‚
â”‚   â–¼           â–¼     â”‚         â”‚   Create Techniques â”‚
â”‚ Valid      Invalid  â”‚         â”‚         â”‚           â”‚
â”‚   â”‚           â”‚     â”‚         â”‚         â–¼           â”‚
â”‚   â–¼           â””â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   Save session ID   â”‚
â”‚ 2D Mode           New Game   â”‚   to localStorage    â”‚
â”‚                           â”‚   â”‚         â”‚           â”‚
â”‚                           â””â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â–¼
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚   2D Mode Active    â”‚
                              â”‚   - PhaserGame      â”‚
                              â”‚   - ChatPanel       â”‚
                              â”‚   - ActionButtons   â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ÑƒĞ»ĞµĞ¹

### `/src/app/` - Next.js App Router

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `page.tsx` | Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°, Ğ°Ğ²Ñ‚Ğ¾Ğ·Ğ°Ğ¿ÑƒÑĞº Ğ¸Ğ³Ñ€Ñ‹ |
| `layout.tsx` | ĞšĞ¾Ñ€Ğ½ĞµĞ²Ğ¾Ğ¹ layout |
| `api/game/start/route.ts` | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ Ğ¸Ğ³Ñ€Ñ‹ |
| `api/game/state/route.ts` | ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ |
| `api/game/move/route.ts` | Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ + Ğ²Ñ€ĞµĞ¼Ñ + Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¦Ğ¸ |
| `api/rest/route.ts` | ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ, Ğ¾Ñ‚Ğ´Ñ‹Ñ…, ÑĞ¾Ğ½ |
| `api/technique/use/route.ts` | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ |
| `api/chat/route.ts` | Ğ§Ğ°Ñ‚ Ñ LLM |

### `/src/components/game/` - Ğ˜Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `PhaserGame.tsx` | 2D Ğ¸Ğ³Ñ€Ğ° Ğ½Ğ° Phaser 3 |
| `ChatPanel.tsx` | Ğ§Ğ°Ñ‚ + ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ°Ñ€ |
| `RestDialog.tsx` | Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ (ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ, ĞÑ‚Ğ´Ñ‹Ñ…, Ğ¡Ğ¾Ğ½) |
| `StatusDialog.tsx` | ĞŸĞ¾Ğ»Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ‚ÑƒÑ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ° |
| `TechniquesDialog.tsx` | ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ‚ĞµÑ…Ğ½Ğ¸Ğº |
| `ActionButtons.tsx` | ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ñ… Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğ¹ |

### `/src/data/presets/` - Ğ£Ğ½Ğ¸Ñ„Ğ¸Ñ†Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€ĞµÑĞµÑ‚Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `base-preset.ts` | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ BasePreset |
| `technique-presets.ts` | ĞŸÑ€ĞµÑĞµÑ‚Ñ‹ Ñ‚ĞµÑ…Ğ½Ğ¸Ğº (13 ÑˆÑ‚) |
| `skill-presets.ts` | ĞŸÑ€ĞµÑĞµÑ‚Ñ‹ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¾Ğ² ĞºÑƒĞ»ÑŒÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ğ¸ (9 ÑˆÑ‚) |
| `formation-presets.ts` | ĞŸÑ€ĞµÑĞµÑ‚Ñ‹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¹ (8 ÑˆÑ‚) |
| `item-presets.ts` | ĞŸÑ€ĞµÑĞµÑ‚Ñ‹ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ¾Ğ² (15 ÑˆÑ‚) |
| `character-presets.ts` | Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ¸ (6 ÑˆÑ‚) |
| `index.ts` | Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ ÑĞºÑĞ¿Ğ¾Ñ€Ñ‚ + ÑƒÑ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹ |

### `/src/lib/game/` - Ğ˜Ğ³Ñ€Ğ¾Ğ²Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ°

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `constants.ts` | Ğ’ÑĞµ ĞºĞ¾Ğ½ÑÑ‚Ğ°Ğ½Ñ‚Ñ‹ Ğ¸Ğ³Ñ€Ñ‹ |
| `truth-system.ts` | **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ˜ÑÑ‚Ğ¸Ğ½Ğ½Ğ¾ÑÑ‚Ğ¸ (singleton, Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¿ĞµÑ€Ğ²Ğ¸Ñ‡Ğ½Ğ°)** |
| `qi-system.ts` | ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ, Ğ¿Ñ€Ğ¾Ñ€Ñ‹Ğ² (ÑĞµÑ€Ğ²ĞµÑ€) |
| `qi-shared.ts` | Ğ Ğ°ÑÑ‡Ñ‘Ñ‚Ñ‹ Ğ¦Ğ¸ (ĞºĞ»Ğ¸ĞµĞ½Ñ‚/ÑĞµÑ€Ğ²ĞµÑ€) |
| `fatigue-system.ts` | Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚Ğ¸ |
| `techniques.ts` | ĞĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğµ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ |
| `time-system.ts` | Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ñ‚Ğ¸ĞºĞ¾Ğ² Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ |
| `time-db.ts` | ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ Ğ² Ğ‘Ğ” |
| `world-coordinates.ts` | 3D ĞºĞ¾Ğ¾Ñ€Ğ´Ğ¸Ğ½Ğ°Ñ‚Ñ‹ Ğ¼Ğ¸Ñ€Ğ° |

### `/src/stores/` - Zustand Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğ°

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `game.store.ts` | Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¸Ğ³Ñ€Ñ‹ |

**Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€Ñ‹:**
- `useGameCharacter()` - Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
- `useGameLocation()` - Ñ‚ĞµĞºÑƒÑ‰Ğ°Ñ Ğ»Ğ¾ĞºĞ°Ñ†Ğ¸Ñ
- `useGameMessages()` - ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ñ‡Ğ°Ñ‚Ğ°
- `useGameLoading()` - ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸
- `useGameActions()` - Ğ²ÑĞµ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ (loadState, startGame, etc.)

---

## ğŸ® Phaser 3 Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ

### ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ

```typescript
const config: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,           // WebGL Ğ¸Ğ»Ğ¸ Canvas
  width: 900,
  height: 550,
  physics: {
    default: 'arcade',         // Ğ›Ñ‘Ğ³ĞºĞ°Ñ 2D Ñ„Ğ¸Ğ·Ğ¸ĞºĞ°
    arcade: { gravity: { x: 0, y: 0 } }
  },
  scene: [GameSceneConfig],
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH
  }
};
```

### SSR ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ

```typescript
// Ğ”Ğ¸Ğ½Ğ°Ğ¼Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚ Ğ² useEffect
useEffect(() => {
  const initGame = async () => {
    const Phaser = (await import('phaser')).default;
    new Phaser.Game(config);
  };
  initGame();
}, []);
```

### Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ‚ĞµĞºÑÑ‚ÑƒÑ€ (Ğ±ĞµĞ· Ğ°ÑÑĞµÑ‚Ğ¾Ğ²)

```typescript
// Ğ¢ĞµĞºÑÑ‚ÑƒÑ€Ñ‹ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ½Ğ¾
const graphics = this.make.graphics();
graphics.fillStyle(0x4ade80);
graphics.fillCircle(24, 24, 24);
graphics.generateTexture('player', 48, 48);
```

ğŸ“– **ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ¾ÑÑ‚Ğ¸:** [docs/PHASER_STACK.md](./PHASER_STACK.md)

---

## ğŸ”Œ API Ğ­Ğ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚Ñ‹

### Ğ˜Ğ³Ñ€Ğ¾Ğ²Ñ‹Ğµ

| Ğ­Ğ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚ | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| `/api/game/start` | POST | Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ½Ğ¾Ğ²ÑƒÑ Ğ¸Ğ³Ñ€Ñƒ |
| `/api/game/state` | GET | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ |
| `/api/game/move` | POST | Ğ”Ğ²Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ + Ğ²Ñ€ĞµĞ¼Ñ + Ğ¿Ğ°ÑÑĞ¸Ğ²Ğ½Ğ¾Ğµ Ğ¦Ğ¸ |
| `/api/rest` | POST | ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ, Ğ¾Ñ‚Ğ´Ñ‹Ñ…, ÑĞ¾Ğ½ |
| `/api/technique/use` | POST | Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºÑƒ |
| `/api/chat` | POST | Ğ”ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ğµ + LLM Ğ¾Ñ‚Ğ²ĞµÑ‚ |

### Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ

| Ğ­Ğ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚ | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| `/api/database/migrate` | GET/POST | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ/Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ” |
| `/api/llm/status` | GET | Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ LLM Ğ¿Ñ€Ğ¾Ğ²Ğ°Ğ¹Ğ´ĞµÑ€Ğ¾Ğ² |
| `/api/settings/llm` | GET/POST | ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ LLM |

---

## ğŸ§© Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€ĞµÑĞµÑ‚Ğ¾Ğ²

### Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµÑ€Ñ„ĞµĞ¹Ñ

```typescript
interface BasePreset {
  id: string;
  name: string;
  nameEn?: string;
  description: string;
  category: PresetCategory;  // basic | advanced | master | legendary
  rarity: PresetRarity;      // common | uncommon | rare | legendary
  requirements?: PresetRequirements;
  cost?: PresetCost;
  sources?: PresetSource[];
  icon?: string;
}
```

### ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | Ğ¦Ğ²ĞµÑ‚ UI |
|-----------|----------|---------|
| basic | Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğµ Ğ¿Ñ€ĞµÑĞµÑ‚Ñ‹ | text-gray-400 |
| advanced | ĞŸÑ€Ğ¾Ğ´Ğ²Ğ¸Ğ½ÑƒÑ‚Ñ‹Ğµ | text-blue-400 |
| master | ĞœĞ°ÑÑ‚ĞµÑ€ÑĞºĞ¸Ğµ | text-purple-400 |
| legendary | Ğ›ĞµĞ³ĞµĞ½Ğ´Ğ°Ñ€Ğ½Ñ‹Ğµ | text-amber-400 |

### Ğ£Ñ‚Ğ¸Ğ»Ğ¸Ñ‚Ñ‹

```typescript
getAllPresets()          // Ğ’ÑĞµ Ğ¿Ñ€ĞµÑĞµÑ‚Ñ‹ Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ¼ Ğ¼Ğ°ÑÑĞ¸Ğ²Ğµ
getStarterPack(id)       // Ğ¡Ñ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ¶Ğ°
findPresetById(id)       // Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
filterByCategory(cat)    // Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
filterByRarity(rarity)   // Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ Ğ¿Ğ¾ Ñ€ĞµĞ´ĞºĞ¾ÑÑ‚Ğ¸
```

---

## ğŸ“Š Ğ”Ğ¸Ğ°Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ° ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ¾Ğ²

```
page.tsx
    â”‚
    â”œâ”€â”€ PhaserGame.tsx
    â”‚       â”‚
    â”‚       â””â”€â”€ Phaser 3 (dynamic import)
    â”‚               â”‚
    â”‚               â”œâ”€â”€ GameScene (movement)
    â”‚               â”œâ”€â”€ Minimap
    â”‚               â””â”€â”€ UI Overlay
    â”‚
    â”œâ”€â”€ ChatPanel.tsx
    â”‚       â”‚
    â”‚       â”œâ”€â”€ CompactStatusBar
    â”‚       â”œâ”€â”€ MessageList
    â”‚       â””â”€â”€ InputField
    â”‚
    â””â”€â”€ ActionButtons.tsx
            â”‚
            â”œâ”€â”€ StatusDialog.tsx
            â”‚       â””â”€â”€ 4 Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸: Ğ¥Ğ°Ñ€Ğ°ĞºÑ‚ĞµÑ€Ğ¸ÑÑ‚Ğ¸ĞºĞ¸, ĞšÑƒĞ»ÑŒÑ‚Ğ¸Ğ²Ğ°Ñ†Ğ¸Ñ, Ğ¡Ğ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ, Ğ’Ñ€ĞµĞ¼Ñ
            â”‚
            â”œâ”€â”€ RestDialog.tsx
            â”‚       â””â”€â”€ 3 Ğ²ĞºĞ»Ğ°Ğ´ĞºĞ¸: ĞœĞµĞ´Ğ¸Ñ‚Ğ°Ñ†Ğ¸Ñ, ĞÑ‚Ğ´Ñ‹Ñ…, Ğ¡Ğ¾Ğ½
            â”‚
            â””â”€â”€ TechniquesDialog.tsx
                    â””â”€â”€ Ğ“Ñ€ÑƒĞ¿Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ğ¿Ğ¾ Ñ‚Ğ¸Ğ¿Ñƒ, ĞºĞ½Ğ¾Ğ¿ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
```

---

## ğŸš€ Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸ Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ

1. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ ĞºĞ½Ğ¾Ğ¿ĞºÑƒ Ğ² `ActionButtons.tsx`
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ´Ğ¸Ğ°Ğ»Ğ¾Ğ³ Ğ² `components/game/NewDialog.tsx`
3. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ API ÑĞ½Ğ´Ğ¿Ğ¾Ğ¸Ğ½Ñ‚ ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶ĞµĞ½ Ñ€Ğ°ÑÑ‡Ñ‘Ñ‚

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ğ¿Ñ€ĞµÑĞµÑ‚Ğ°

1. Ğ’Ñ‹Ğ±Ñ€Ğ°Ñ‚ÑŒ Ñ„Ğ°Ğ¹Ğ»: technique/skill/formation/item/character-presets.ts
2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµÑĞµÑ‚ Ñ ÑƒĞ½Ğ¸ĞºĞ°Ğ»ÑŒĞ½Ñ‹Ğ¼ ID
3. Ğ£ĞºĞ°Ğ·Ğ°Ñ‚ÑŒ category, rarity, requirements

### Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ API

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ `src/app/api/new-action/route.ts`
2. Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Zod Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
3. Ğ’ĞµÑ€Ğ½ÑƒÑ‚ÑŒ `character` Ğ´Ğ»Ñ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

---

## ğŸšŒ Event Bus (Ğ¨Ğ¸Ğ½Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹)

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.0 | **Ğ”Ğ°Ñ‚Ğ°:** 2026-03-01

### ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ

Event Bus Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ **Ğ¢ĞĞ›Ğ¬ĞšĞ** Ğ´Ğ»Ñ ÑĞ²ÑĞ·Ğ¸ Ğ¼ĞµĞ¶Ğ´Ñƒ:
- **Phaser Engine (ĞºĞ»Ğ¸ĞµĞ½Ñ‚)** â†” **Server (Truth System)**

React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ Ğ²Ğ·Ğ°Ğ¸Ğ¼Ğ¾Ğ´ĞµĞ¹ÑÑ‚Ğ²ÑƒÑÑ‚ Ğ¼ĞµĞ¶Ğ´Ñƒ ÑĞ¾Ğ±Ğ¾Ğ¹ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· API Ğ²Ñ‹Ğ·Ğ¾Ğ²Ñ‹!

### ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PHASER ENGINE                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 1. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Qi Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾ (Ğ±Ñ‹ÑÑ‚Ñ€Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ° UI)             â”‚  â”‚
â”‚  â”‚ 2. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° technique:use Ñ‡ĞµÑ€ĞµĞ· Event Bus                 â”‚  â”‚
â”‚  â”‚ 3. ĞŸĞ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ° (canUse, damageMultiplier, currentQi) â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ HTTP POST /api/game/event
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SERVER (Event Bus)                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ handlers/combat.ts â†’ handleTechniqueUse()                 â”‚  â”‚
â”‚  â”‚   â”œâ”€ ĞŸĞ¾Ğ¸ÑĞº Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ Ğ² Ğ‘Ğ” (technique.qiCost)                â”‚  â”‚
â”‚  â”‚   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ²Ğ»Ğ°Ğ´ĞµĞ½Ğ¸Ñ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¾Ğ¹                           â”‚  â”‚
â”‚  â”‚   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Qi Ñ‡ĞµÑ€ĞµĞ· TruthSystem                        â”‚  â”‚
â”‚  â”‚   â”œâ”€ Ğ¡Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Qi: TruthSystem.spendQi()                   â”‚  â”‚
â”‚  â”‚   â”œâ”€ Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ Ğ±Ğ¾Ğ½ÑƒÑĞ¾Ğ² ÑƒÑ€Ğ¾Ğ½Ğ° (mastery, conductivity)         â”‚  â”‚
â”‚  â”‚   â””â”€ Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‚: canUse, damageMultiplier, currentQi         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Ğ˜Ğ¡ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞĞ˜Ğ• Ğ¢Ğ•Ğ¥ĞĞ˜ĞšĞ˜                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Phaser)                                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°: currentQi >= qiCost (Ğ»Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾)                 â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Event: technique:use { techniqueId, position }           â”‚
â”‚                                                                  â”‚
â”‚   2. EVENT BUS HANDLER (combat.ts)                               â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ db.technique.findUnique(techniqueId)                     â”‚
â”‚      â”‚   â””â”€ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ qiCost Ğ¸Ğ· Ğ‘Ğ” (ĞĞ• Ñ…Ğ°Ñ€Ğ´ĞºĞ¾Ğ´!)                  â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ TruthSystem.spendQi(sessionId, qiCost)                   â”‚
â”‚      â”‚   â””â”€ Ğ•Ğ”Ğ˜ĞĞ¡Ğ¢Ğ’Ğ•ĞĞĞĞ• Ğ¼ĞµÑÑ‚Ğ¾ ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ñ Ğ¦Ğ¸                       â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ Ğ Ğ°ÑÑ‡Ñ‘Ñ‚ damageMultiplier                                  â”‚
â”‚      â”‚   â”œâ”€ masteryBonus (Ğ´Ğ¾ +50% Ğ¿Ñ€Ğ¸ 100% Ğ¼Ğ°ÑÑ‚ĞµÑ€ÑÑ‚Ğ²Ğ°)           â”‚
â”‚      â”‚   â””â”€ conductivityBonus (Ğ¿Ñ€Ğ¾Ğ²Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¦Ğ¸)                  â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Response: { canUse, damageMultiplier, currentQi }        â”‚
â”‚                                                                  â”‚
â”‚   3. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°)                                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ canUse = true â†’ Ğ½Ğ°Ğ½Ğ¾ÑĞ¸Ğ¼ ÑƒÑ€Ğ¾Ğ½                             â”‚
â”‚      â”‚   â””â”€ finalDamage = baseDamage * damageMultiplier          â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ canUse = false â†’ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ                       â”‚
â”‚          â””â”€ "ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ¦Ğ¸" / "Ğ¢ĞµÑ…Ğ½Ğ¸ĞºĞ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ°"             â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ°

| ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ | ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° |
|---------|---------|
| **Qi ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ ĞĞ”Ğ˜Ğ Ñ€Ğ°Ğ·** | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ² `TruthSystem.spendQi()` |
| **qiCost Ğ¸Ğ· Ğ‘Ğ”** | ĞĞµ Ñ…Ğ°Ñ€Ğ´ĞºĞ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ! |
| **changes.currentQi** | Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ğ¸ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ñƒ |
| **Event Bus â‰  React** | React ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ â†’ Ğ¿Ñ€ÑĞ¼Ñ‹Ğµ API |

### Ğ¤Ğ°Ğ¹Ğ»Ñ‹ Event Bus

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `src/lib/game/event-bus/index.ts` | Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ ÑˆĞ¸Ğ½Ñ‹ |
| `src/lib/game/event-bus/handlers/combat.ts` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ° Ñ‚ĞµÑ…Ğ½Ğ¸Ğº |
| `src/lib/game/event-bus/processor.ts` | ĞŸÑ€Ğ¾Ñ†ĞµÑÑĞ¾Ñ€ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ |
| `src/lib/game/skeleton/event-processor.ts` | Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ TruthSystem |
| `src/lib/game/skeleton/combat-processor.ts` | Ğ‘Ğ¾ĞµĞ²Ğ°Ñ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° |

---

## ğŸ› Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹Ğµ Ğ±Ğ°Ğ³Ğ¸ (2026-03-01)

### Ğ”Ğ²Ğ¾Ğ¹Ğ½Ğ¾Ğµ ÑĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ Ğ¦Ğ¸

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** ĞŸÑ€Ğ¸ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ¸ Ğ¦Ğ¸ ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°Ğ»Ğ°ÑÑŒ Ğ´Ğ²Ğ°Ğ¶Ğ´Ñ‹:
1. `combat-processor.ts` â†’ `TruthSystem.spendQi()` âœ…
2. `event-processor.ts` â†’ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑĞ» `changes.currentQi` Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾ âŒ

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ’ `event-processor.ts` ÑƒĞ±Ñ€Ğ°Ğ½Ğ¾ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğµ `changes.currentQi` Ğº Ğ¦Ğ¸.

```typescript
// event-processor.ts (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ)
// Ğ’ĞĞ–ĞĞ: combat processor ÑƒĞ¶Ğµ ÑĞ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ Ğ¦Ğ¸ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· TruthSystem.spendQi()
// ĞŸĞ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ·Ğ´ĞµÑÑŒ ĞĞ• Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ÑÑ‚ÑŒ changes.currentQi Ğº Ğ¦Ğ¸!
// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞµĞ¼ ÑƒÑÑ‚Ğ°Ğ»Ğ¾ÑÑ‚ÑŒ Ğ¸ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ
```

### Hardcoded Qi Cost

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** Ğ’ `handlers/combat.ts` ÑÑ‚Ğ¾Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ¦Ğ¸ Ğ±Ñ‹Ğ»Ğ° Ğ·Ğ°Ñ…Ğ°Ñ€Ğ´ĞºĞ¾Ğ¶ĞµĞ½Ğ° (10, 20).

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** qiCost Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ğ¸Ğ· Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…:

```typescript
// handlers/combat.ts (Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ)
const technique = await db.technique.findUnique({ where: { id: techniqueId } });
const qiCost = technique.qiCost ?? 0;
```

### Qi Stones Ğ½Ğµ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ»ÑĞ»Ğ¸ÑÑŒ

**ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°:** CheatMenuContent Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°Ğ» Ğ½ĞµÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒÑÑ‰Ğ¸Ğ¹ API Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚.

**Ğ ĞµÑˆĞµĞ½Ğ¸Ğµ:** Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½ `add_qi_stone` Ğ² `cheats.service.ts`, CheatMenuContent Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ `/api/cheats`.

---

## ğŸ¥ Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ñ‚ĞµĞ»Ğ° (Kenshi-style) â€” Event Bus

> **Ğ’ĞµÑ€ÑĞ¸Ñ:** 1.0 | **Ğ”Ğ°Ñ‚Ğ°:** 2026-03-01

### Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ñ Ñ‚ĞµĞ»Ğ° Ñ‡ĞµÑ€ĞµĞ· Event Bus

| Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ |
|---------|----------|-----------|
| `body:damage` | ĞĞ°Ğ½ĞµÑĞµĞ½Ğ¸Ğµ ÑƒÑ€Ğ¾Ğ½Ğ° Ñ‡Ğ°ÑÑ‚Ğ¸ Ñ‚ĞµĞ»Ğ° | `partId`, `damage`, `damageType`, `source`, `penetration` |
| `body:heal` | Ğ›ĞµÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡Ğ°ÑÑ‚Ğ¸ Ñ‚ĞµĞ»Ğ° | `partId?`, `amount`, `source` |
| `body:attach_limb` | ĞŸÑ€Ğ¸Ğ¶Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾ÑÑ‚Ğ¸ | `partType`, `partId`, `donorCultivationLevel`, `donorCultivationSubLevel` |
| `body:regenerate` | Ğ ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾ÑÑ‚Ğ¸ | `partId`, `useFormation` |
| `body:update` | ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ñ Ñ‚ĞµĞ»Ğ° | `bodyState`, `changedParts` |

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ñ Ñ‡Ğ°ÑÑ‚Ğ¸ Ñ‚ĞµĞ»Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     ĞŸĞĞ’Ğ Ğ•Ğ–Ğ”Ğ•ĞĞ˜Ğ• Ğ§ĞĞ¡Ğ¢Ğ˜ Ğ¢Ğ•Ğ›Ğ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Phaser)                                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Event: body:damage { partId, damage, damageType }        â”‚
â”‚                                                                  â”‚
â”‚   2. EVENT BUS HANDLER (handlers/body.ts)                        â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° bodyState Ğ¸Ğ· Ğ‘Ğ”                                 â”‚
â”‚      â”‚   â””â”€ Ğ”ĞµÑĞµÑ€Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¸Ğ»Ğ¸ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ½Ğ¾Ğ²Ğ¾Ğ³Ğ¾ Ñ‚ĞµĞ»Ğ°              â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ applyDamageToLimb(part, damage, { penetration })         â”‚
â”‚      â”‚   â”œâ”€ Ğ¤ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ°Ñ HP ÑƒĞ¼ĞµĞ½ÑŒÑˆĞ°ĞµÑ‚ÑÑ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¹                 â”‚
â”‚      â”‚   â”œâ”€ Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ½Ğ°Ñ HP Ğ¿Ğ¾Ğ³Ğ»Ğ¾Ñ‰Ğ°ĞµÑ‚ Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ğº                     â”‚
â”‚      â”‚   â””â”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¾Ñ‚Ñ€ÑƒĞ±Ğ°Ğ½Ğ¸Ñ (structuralHP <= 0)               â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ñ‡Ğ°ÑÑ‚Ğ¸                                 â”‚
â”‚      â”‚   â””â”€ getLimbStatus() â†’ healthy/damaged/crippled/severed   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ Ğ¡Ğ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ bodyState Ğ² Ğ‘Ğ”                                â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Response: { severed, fatal, newStatus }                  â”‚
â”‚                                                                  â”‚
â”‚   3. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°)                                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ visual:update_body_part â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ HP Ğ±Ğ°Ñ€Ğ¾Ğ²            â”‚
â”‚      â”œâ”€ visual:show_notification â†’ "ĞÑ‚Ñ€ÑƒĞ±Ğ»ĞµĞ½Ğ¾: Ğ›ĞµĞ²Ğ°Ñ Ñ€ÑƒĞºĞ°!"      â”‚
â”‚      â””â”€ game:death â†’ ĞµÑĞ»Ğ¸ fatal = true                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ­ĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ° Ñ‡ĞµÑ€ĞµĞ· Event Bus

| Ğ¡Ğ¾Ğ±Ñ‹Ñ‚Ğ¸Ğµ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ | ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ |
|---------|----------|-----------|
| `inventory:equip_item` | Ğ­ĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ | `itemId`, `slotId` |
| `inventory:unequip_item` | Ğ¡Ğ½ÑÑ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ | `slotId` |
| `inventory:drop_item` | Ğ’Ñ‹Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚ | `itemId`, `quantity`, `position` |

### ĞŸĞ¾Ñ‚Ğ¾Ğº ÑĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Ğ­ĞšĞ˜ĞŸĞ˜Ğ ĞĞ’ĞšĞ ĞŸĞ Ğ•Ğ”ĞœĞ•Ğ¢Ğ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚   1. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Phaser)                                             â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Event: inventory:equip_item { itemId, slotId }           â”‚
â”‚                                                                  â”‚
â”‚   2. EVENT BUS HANDLER (handlers/inventory.ts)                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ inventoryService.equipItem(characterId, itemId, slotId)  â”‚
â”‚      â”‚   â”œâ”€ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ÑĞ»Ğ¾Ñ‚Ğ°                         â”‚
â”‚      â”‚   â”œâ”€ Ğ¡Ğ½ÑÑ‚Ğ¸Ğµ Ñ‚ĞµĞºÑƒÑ‰ĞµĞ³Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¼ĞµÑ‚Ğ° Ğ² ÑĞ»Ğ¾Ñ‚Ğµ                     â”‚
â”‚      â”‚   â””â”€ Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ² Equipment Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ                  â”‚
â”‚      â”‚                                                           â”‚
â”‚      â”œâ”€ truthSystem.updateInventory() â†’ ÑĞ¸Ğ½Ñ…Ñ€Ğ¾Ğ½Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸     â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ Response: { equipped: { slotId, itemId } }               â”‚
â”‚                                                                  â”‚
â”‚   3. Ğ”Ğ’Ğ˜Ğ–ĞĞš (Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°)                                   â”‚
â”‚      â”‚                                                           â”‚
â”‚      â””â”€ visual:equipment_changed â†’ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ UI ÑĞºĞ¸Ğ¿Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸     â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¤Ğ°Ğ¹Ğ»Ñ‹

| Ğ¤Ğ°Ğ¹Ğ» | ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
|------|------------|
| `src/lib/game/events/game-events.ts` | Ğ¢Ğ¸Ğ¿Ñ‹ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ (BodyEvent, InventoryEvent) |
| `src/lib/game/event-bus/handlers/body.ts` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ñ‚ĞµĞ»Ğ° |
| `src/lib/game/event-bus/handlers/inventory.ts` | ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ Ğ¸Ğ½Ğ²ĞµĞ½Ñ‚Ğ°Ñ€Ñ |
| `src/lib/game/body-system.ts` | Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ğ¾Ğ²Ñ€ĞµĞ¶Ğ´ĞµĞ½Ğ¸Ğ¹ Ğ¸ Ñ€ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸ |
| `src/lib/game/limb-attachment.ts` | ĞŸÑ€Ğ¸Ğ¶Ğ¸Ğ²Ğ»ĞµĞ½Ğ¸Ğµ Ğ¸ Ñ€ĞµĞ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½ĞµÑ‡Ğ½Ğ¾ÑÑ‚ĞµĞ¹ |
| `src/components/game/BodyDoll.tsx` | UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ ĞºÑƒĞºĞ»Ñ‹ Ñ‚ĞµĞ»Ğ° |

---

*ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ğ° Ğ´Ğ»Ñ Ğ²ĞµÑ€ÑĞ¸Ğ¸ 12 (2026-03-01)*
