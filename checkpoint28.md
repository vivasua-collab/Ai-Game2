# Checkpoint 28 - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TruthSystem

**–î–∞—Ç–∞:** 2026-02-28
**–í–µ—Ç–∫–∞:** main2d2
**–ó–∞–¥–∞—á–∞:** –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TruthSystem –≤–æ –≤—Å–µ API routes

---

## üìã –î–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –∑–∞–¥–∞—á

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö API routes
- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç—å /api/meditation/route.ts (~767 —Å—Ç—Ä–æ–∫)
- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç—å /api/rest/route.ts (~199 —Å—Ç—Ä–æ–∫)
- [x] –ü—Ä–æ—á–∏—Ç–∞—Ç—å /api/technique/use/route.ts (~183 —Å—Ç—Ä–æ–∫)

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TruthSystem
- [x] **2.1** `/api/meditation` - –º–µ–¥–∏—Ç–∞—Ü–∏—è –∏ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¶–∏ ‚úÖ
- [x] **2.2** `/api/rest` - –æ—Ç–¥—ã—Ö –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ‚úÖ
- [x] **2.3** `/api/technique/use` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏–∫ ‚úÖ

### –≠—Ç–∞–ø 3: –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- [x] **3.1** `/api/game/save` - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ ‚úÖ
- [ ] **3.2** –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ ‚úÖ
- [x] –ü—Ä–æ–≤–µ—Ä–∫–∞ lint ‚úÖ
- [x] –ö–æ–º–º–∏—Ç –∏ –ø—É—à ‚úÖ

---

## üìù –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö API routes ‚úÖ

#### 1.1 /api/meditation/route.ts (~767 —Å—Ç—Ä–æ–∫)
**–¢–∏–ø—ã –º–µ–¥–∏—Ç–∞—Ü–∏–∏:**
- `accumulation` - –æ–±—ã—á–Ω–∞—è –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–∞—è (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- `breakthrough` - –º–µ–¥–∏—Ç–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ—Ä—ã–≤ (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)
- `conductivity` - –º–µ–¥–∏—Ç–∞—Ü–∏—è –Ω–∞ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ë–î + –ø–∞–º—è—Ç—å):**
- –ü—Ä–æ—Ä—ã–≤ —É—Ä–æ–≤–Ω—è ‚Üí `applyBreakthrough()`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç–∏ ‚Üí `updateConductivity()`

**–û–±—ã—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –ø–∞–º—è—Ç—å):**
- –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ –¶–∏ ‚Üí `addQi()`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ ‚Üí `updateFatigue()`
- –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí `advanceTime()`

#### 1.2 /api/rest/route.ts (~199 —Å—Ç—Ä–æ–∫)
**–ò—Å–ø–æ–ª—å–∑—É–µ—Ç:** `processTimeTickEffects` –∏–∑ `time-tick.service.ts`

**–û–ø–µ—Ä–∞—Ü–∏–∏ (—Ç–æ–ª—å–∫–æ –ø–∞–º—è—Ç—å):**
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ ‚Üí `recoverFatigue()`
- –ü–∞—Å—Å–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –¶–∏ ‚Üí `addQi()`
- –ü—Ä–æ–¥–≤–∏–∂–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ ‚Üí `advanceTime()`

#### 1.3 /api/technique/use/route.ts (~183 —Å—Ç—Ä–æ–∫)
**–û–ø–µ—Ä–∞—Ü–∏–∏:**
- –°–ø–∏—Å–∞–Ω–∏–µ –¶–∏ ‚Üí `spendQi()`
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ ‚Üí `updateFatigue()`
- –ü—Ä–∏—Ä–æ—Å—Ç –º–∞—Å—Ç–µ—Ä—Å—Ç–≤–∞ ‚Üí –ë–î (–æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)

---

### –≠—Ç–∞–ø 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è TruthSystem

#### 2.0 –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –≤ TruthSystem ‚úÖ
–î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:
- `updateFatigue(sessionId, physical, mental)` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
- `recoverFatigue(sessionId, physical, mental)` - –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏
- `applyBreakthrough(sessionId, data)` - –ø—Ä–æ—Ä—ã–≤ (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)
- `updateConductivity(sessionId, conductivity, gained)` - –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)

#### 2.1 /api/meditation ‚úÖ
**–ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û!**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç TruthSystem –ø–µ—Ä–≤—ã–º (–ø–∞–º—è—Ç—å –ø–µ—Ä–≤–∏—á–Ω–∞)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–µ—Å—Å–∏—é –≤ –ø–∞–º—è—Ç—å –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- accumulation: addQi(), updateFatigue(), advanceTime()
- breakthrough: applyBreakthrough() (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)
- conductivity: updateConductivity() (–ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç source: 'memory' | 'database'

#### 2.2 /api/rest ‚úÖ
**–£–ñ–ï –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û!**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç TruthSystem –ø–µ—Ä–≤—ã–º (–ø–∞–º—è—Ç—å –ø–µ—Ä–≤–∏—á–Ω–∞)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Å–µ—Å—Å–∏—é –≤ –ø–∞–º—è—Ç—å –µ—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞
- –û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ TruthSystem
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç source: 'memory' | 'database'

#### 2.3 /api/technique/use ‚úÖ
**–ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û!**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç TruthSystem –ø–µ—Ä–≤—ã–º (–ø–∞–º—è—Ç—å –ø–µ—Ä–≤–∏—á–Ω–∞)
- –°–ø–∏—Å–∞–Ω–∏–µ –¶–∏ —á–µ—Ä–µ–∑ TruthSystem.spendQi()
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —É—Å—Ç–∞–ª–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ TruthSystem.updateFatigue()
- –ú–∞—Å—Ç–µ—Ä—Å—Ç–≤–æ - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è, –≤ –ë–î
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç source: 'memory' | 'database'

---

### –≠—Ç–∞–ø 3: –ù–æ–≤—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### 3.1 /api/game/save ‚úÖ
**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
- POST –º–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä `saveType`: 'quick' | 'full'
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Å–µ—Å—Å–∏–∏ –≤ –ø–∞–º—è—Ç–∏
- –í–æ–∑–≤—Ä–∞—Ç `source`: 'memory' | 'database'
- –í–æ–∑–≤—Ä–∞—Ç `stats`: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ TruthSystem

**–ö–æ–¥:**
```typescript
// POST - –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ TruthSystem
export async function POST(request: NextRequest) {
  const { sessionId, saveType = 'full' } = body;
  const truthSystem = TruthSystem.getInstance();
  
  if (saveType === 'quick') {
    result = await truthSystem.quickSave(sessionId);
  } else {
    result = await truthSystem.saveToDatabase(sessionId);
  }
  // ...
}
```

#### 3.2 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
_–°—Ç–∞—Ç—É—Å: –æ–∂–∏–¥–∞–Ω–∏–µ_

---

### –≠—Ç–∞–ø 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [x] TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è truth-system.ts - OK
- [x] TypeScript –∫–æ–º–ø–∏–ª—è—Ü–∏—è save/route.ts - OK
- [ ] –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ lint
- [ ] –ö–æ–º–º–∏—Ç –∏ –ø—É—à

---

## üìä –ò—Ç–æ–≥–∏ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ò–∑–º–µ–Ω–µ–Ω–æ —Ñ–∞–π–ª–æ–≤ | 5 (truth-system.ts, save/route.ts, rest/route.ts, meditation/route.ts, technique/use/route.ts) |
| –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ API | 4/4 (rest ‚úÖ, save ‚úÖ, meditation ‚úÖ, technique/use ‚úÖ) |
| –î–æ–±–∞–≤–ª–µ–Ω–æ –º–µ—Ç–æ–¥–æ–≤ | 5 (updateFatigue, recoverFatigue, applyBreakthrough, updateConductivity, POST /api/game/save) |
| –°—Ç—Ä–æ–∫ –≤ truth-system.ts | ~1020 |
| –ö–æ–º–º–∏—Ç–æ–≤ | 2 (02a3525 + —Ä–∞–Ω–µ–µ) |

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

1. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è /api/technique/use**
2. ‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è /api/meditation**
3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ lint**
4. ‚úÖ **–ö–æ–º–º–∏—Ç –∏ –ø—É—à**

---

## üîÆ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏** - unloadSession() –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å /api/chat** - LLM –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã

---

## üîç –≠—Ç–∞–ø 5: –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ (2026-02-28)

### 5.1 –ê–Ω–∞–ª–∏–∑ API routes –Ω–∞ TruthSystem

| API Route | TruthSystem | –°—Ç–∞—Ç—É—Å | –ü—Ä–æ–±–ª–µ–º—ã |
|-----------|-------------|--------|----------|
| /api/game/start | ‚úÖ | OK | loadSession() |
| /api/game/state | ‚úÖ | OK | getSessionState() |
| /api/game/save | ‚úÖ | OK | saveToDatabase(), quickSave() |
| /api/game/move | ‚ùå | **–¢–†–ï–ë–£–ï–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò** | –ü—Ä—è–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î |
| /api/rest | ‚úÖ | OK | updateCharacter(), advanceTime() |
| /api/meditation | ‚úÖ | OK | addQi(), applyBreakthrough(), updateConductivity() |
| /api/technique/use | ‚úÖ | OK | spendQi(), updateFatigue() |
| /api/chat | ‚ùå | **–¢–†–ï–ë–£–ï–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò** | ~1000 —Å—Ç—Ä–æ–∫, –ø—Ä—è–º—ã–µ db.update |
| /api/inventory/use | ‚ùå | **–¢–†–ï–ë–£–ï–¢ –ò–ù–¢–ï–ì–†–ê–¶–ò–ò** | inventory.service - –ø—Ä—è–º—ã–µ db.update |
| /api/technique/slot | ‚ö†Ô∏è | –ù–ï –ö–†–ò–¢–ò–ß–ù–û | –¢–æ–ª—å–∫–æ —Å–ª–æ—Ç—ã, –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ |

### 5.2 –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö—Å—è —Ä–∞—Å—á—ë—Ç–æ–≤

| –ú–æ–¥—É–ª—å | –î—É–±–ª–∏–∫–∞—Ç—ã | –°—Ç–∞—Ç—É—Å |
|--------|-----------|--------|
| qi-shared.ts | - | ‚úÖ –≠—Ç–∞–ª–æ–Ω |
| conductivity-system.ts | - | ‚úÖ –≠—Ç–∞–ª–æ–Ω |
| time-tick.service.ts | - | ‚úÖ –≠—Ç–∞–ª–æ–Ω |
| qi-system.ts | - | ‚úÖ OK - –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ qi-shared.ts |
| chat/route.ts | `calculateUpdatedTime()` | ‚ùå **–î–£–ë–õ–ò–ö–ê–¢** - –µ—Å—Ç—å advanceWorldTime –≤ time-db.ts |
| inventory.service.ts | - | ‚úÖ OK - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç clampQiWithOverflow |

### 5.3 –ó–∞–¥–∞—á–∏ –∞–Ω–∞–ª–∏–∑–∞
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ API routes –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ TruthSystem
- [x] –ù–∞–π—Ç–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Ä–∞—Å—á—ë—Ç—ã
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä—è–º—ã–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ë–î –º–∏–Ω—É—è TruthSystem
- [ ] **–ò–°–ü–†–ê–í–ò–¢–¨: /api/game/move** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TruthSystem
- [ ] **–ò–°–ü–†–ê–í–ò–¢–¨: /api/chat** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TruthSystem, —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç
- [ ] **–ò–°–ü–†–ê–í–ò–¢–¨: inventory.service.ts** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å TruthSystem
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏

### 5.4 –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è /api/game/move** (–ø—Ä–æ—Å—Ç–∞—è)
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TruthSystem
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TruthSystem.advanceTime()

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è /api/chat** (—Å–ª–æ–∂–Ω–∞—è)
   - –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É TruthSystem
   - –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç `calculateUpdatedTime()`
   - –ó–∞–º–µ–Ω–∏—Ç—å –ø—Ä—è–º—ã–µ db.character.update –Ω–∞ –º–µ—Ç–æ–¥—ã TruthSystem

3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è inventory.service.ts**
   - –î–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π TruthSystem
   - addQi, updateFatigue —á–µ—Ä–µ–∑ TruthSystem

---

## üîß –≠—Ç–∞–ø 6: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 6.1 /api/game/move ‚úÖ
**–ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û!**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ TruthSystem.getSessionState()
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ø–∞–º—è—Ç—å—é —á–µ—Ä–µ–∑ truthSystem.advanceTime()
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `source` –≤ –æ—Ç–≤–µ—Ç
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ Qi –≤ –ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ truthSystem.updateCharacter()

### 6.2 inventory.service.ts ‚úÖ
**–ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û!**
- useItem() –ø—Ä–æ–≤–µ—Ä—è–µ—Ç TruthSystem.getSessionByCharacter()
- –ï—Å–ª–∏ —Å–µ—Å—Å–∏—è –≤ –ø–∞–º—è—Ç–∏ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç truthSystem.addQi(), updateCharacter(), recoverFatigue()
- Fallback –Ω–∞ –ø—Ä—è–º—É—é –ë–î –µ—Å–ª–∏ —Å–µ—Å—Å–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `source` –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### 6.3 /api/chat (–ù–ï –ö–†–ò–¢–ò–ß–ù–û)
**–°—Ç–∞—Ç—É—Å:** –û—Ç–ª–æ–∂–µ–Ω–æ
- –§–∞–π–ª ~1000 —Å—Ç—Ä–æ–∫ - —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–π –±–æ–ª—å—à–æ–π –∑–∞–¥–∞—á–∏
- –î—É–±–ª–∏–∫–∞—Ç `calculateUpdatedTime()` –º–æ–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å, –Ω–æ —ç—Ç–æ –Ω–µ –±–ª–æ–∫–µ—Ä
- –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫—É–ª—å—Ç–∏–≤–∞—Ü–∏–∏ —É–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º API /api/meditation

### 6.4 –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏
**–°—Ç–∞—Ç—É—Å:** –û—Ç–ª–æ–∂–µ–Ω–æ
- unloadSession() —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ TruthSystem
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/api/game/end`
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

---

## üìä –ò—Ç–æ–≥–∏ –∞–Ω–∞–ª–∏–∑–∞

| API Route | TruthSystem | –°—Ç–∞—Ç—É—Å |
|-----------|-------------|--------|
| /api/game/start | ‚úÖ | OK |
| /api/game/state | ‚úÖ | OK |
| /api/game/save | ‚úÖ | OK |
| /api/game/move | ‚úÖ | **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| /api/rest | ‚úÖ | OK |
| /api/meditation | ‚úÖ | OK |
| /api/technique/use | ‚úÖ | OK |
| /api/chat | ‚ö†Ô∏è | –û—Ç–ª–æ–∂–µ–Ω–æ |
| inventory.service | ‚úÖ | **–ò–°–ü–†–ê–í–õ–ï–ù–û** |
| /api/technique/slot | ‚ö†Ô∏è | –ù–µ –∫—Ä–∏—Ç–∏—á–Ω–æ |

### –î—É–±–ª–∏–∫–∞—Ç—ã —É–¥–∞–ª–µ–Ω—ã: 0
- chat/route.ts - calculateUpdatedTime() –º–æ–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å, –Ω–æ –æ—Ç–ª–æ–∂–µ–Ω–æ

---

*–ê–Ω–∞–ª–∏–∑ –∑–∞–≤–µ—Ä—à—ë–Ω: 2026-02-28*
