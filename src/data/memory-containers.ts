// Контейнеры памяти для мира культивации
// Статические правила мира, неизменяемые в процессе игры

export const MEMORY_CONTAINERS = {
  // ==================== CONTAINER 0: ПОВЕЛИТЕЛЬ ====================
  container_0: {
    name: "Повелитель",
    type: "dynamic",
    description: "Контейнер создателя мира",
    rules: `
-- Контейнер памяти 0 (Повелитель) --
- Создатель всего сущего
- Не игрок, роль - творец, наблюдатель
- Полные права на изменение и дополнение правил мира
- Обращения видны ГГ через сообщения системы
- Поле зрения сосредоточено вокруг ГГ (радиус по умолчанию 10 м)
    `,
  },

  // ==================== CONTAINER 1: ОСНОВЫ МИРА ====================
  container_1: {
    name: "Основы мира",
    type: "static",
    immutable: true,
    description: "Базовые законы существования",
    rules: `
-- Контейнер памяти 1 (Основы мира) --
ИЗМЕНЕНИЯ В РАМКАХ МИРА ЗАПРЕЩЕНЫ

0. Основа
- Правила мира незыблемы, не меняются со временем
- Мир строго следует установленным законам
- Только "Повелитель" может нарушать правила

1. Время
- Ничего не происходит мгновенно
- Время течёт плавно
- Для расчётов используется дискретизация времени с шагом 0.1 секунды
- Все процессы требуют времени
- Временные интервалы стандартные: секунды, минуты, часы, дни

2. Энергии и материя
- Взаимодействие с энергиями строго по правилам
- Ничто не берётся из ниоткуда и не исчезает в никуда
- Сохранение энергии строго соблюдается
- Сохранение материи строго соблюдается
    `,
  },

  // ==================== CONTAINER 2: ЦИ ====================
  container_2: {
    name: "Ци",
    type: "static",
    immutable: true,
    description: "Система энергии Ци",
    rules: `
-- Контейнер памяти 2 (Ци) --
ИЗМЕНЕНИЯ В РАМКАХ МИРА ЗАПРЕЩЕНЫ

3. Ци — основной параметр
- Мир симуляции наполнен Ци
- Ци это виртуальные частицы
- Ци квантованная, не дробная
- Запрещено использовать неполные (дробные) единицы Ци
- Квант Ци имеет спин: Спокойный или Хаотичный
- Объём пространства может содержать обе формы Ци в разных пропорциях
- Других типов Ци нет, не существует и не может быть создано
- Хаотичная Ци имеет выше "энергетический" потенциал
- Период полураспада хаотичной Ци 24 часа

АГРЕГАТНЫЕ СОСТОЯНИЯ ЦИ:
- Газ: в окружающей среде
- Твёрдое тело: в кристаллах Ци (духовных камнях)
- Жидкость: в теле практиков
- Плазма: в массивах и внешних техниках

РАСПРОСТРАНЕНИЕ ЦИ:
- Ци поднимается из недр мира
- Лей-линии значительно ускоряют выход Ци из недр
- Минимальная скорость истечения Ци: 10 ед/ч·м²

ПЛОТНОСТЬ ЦИ:
- В естественной среде измеряется в ед/м³
- Максимальная плотность в замкнутом пространстве: 10000 ед/м³
- При превышении формируются кристаллы Ци (1024 ед/см³)
- Кристаллы Ци условно стабильны

ПЛОТНОСТЬ В ТЕЛЕ ПРАКТИКА:
- Qi(x) = 2^(уровень-1) ед/см³, где x - уровень практика

4. Ци — хранение и рассеивание
- Сердце мира управляет контролем, хранением, поглощением, выделением Ци
- Для хранения используется подпространство
- Для поглощения используется купол
- Для выделения используется Сердце мира
    `,
  },

  // ==================== CONTAINER 3: ЦИ И КУЛЬТИВАТОРЫ ====================
  container_3: {
    name: "Ци и культиваторы",
    type: "static",
    immutable: true,
    description: "Взаимодействие Ци с организмами",
    rules: `
-- Контейнер памяти 3 (Ци и культиваторы) --
ИЗМЕНЕНИЯ В РАМКАХ МИРА ЗАПРЕЩЕНЫ

5. Ци практика
- У практика Ци хранится в Ядре
- Ци в ядро попадает двумя способами:
  1. Поглощение спокойной Ци из окружающей среды (только при медитации)
     Скорость поглощения = проводимость меридиан
  2. Генерация микро-ядром (10% от ёмкости ядра в сутки)
- Ци поглощённая конденсируется в меридианах до нужной плотности

6. Культивация
- 9 основных уровней культивации
- При повышении основного уровня меняется плотность Ци и физиология
- При переходе с 9 на 10 уровень практика выбрасывает за границы мира
- У каждого уровня 9 малых уровней (ступеней)
- На малых уровнях растёт только количество Ци

МЕХАНИКА ПРОРЫВА:
- Малый уровень: ёмкость ядра × 10 накопленной Ци
- Большой уровень: ёмкость ядра × 100 накопленной Ци

7. Тело практика
Три основные системы:

ЯДРО:
- Ци в жидком состоянии
- Стартовый объём: 100-2000 ед (человек), до 100000 (древние расы)
- Ёмкость растёт на ~10% за уровень (округление вверх)

СИСТЕМА МЕРИДИАН:
- Древообразная структура
- Корень - ядро
- Базовая проводимость = объём ядра / 360 сек
- Объём хранения в меридианах = проводимость × 5 секунд

УЗЛЫ ВЫВОДА:
- На начальных уровнях только на конечностях
- На высоких уровнях - любая часть тела

СТИМУЛЯЦИЯ:
- Можно стимулировать работу организма Ци
- Стимуляция ускоряет процессы, не заменяет биохимию
- Восстановление требует пищи, сна и покоя
- Частое использование вызывает истощение
    `,
  },

  // ==================== CONTAINER 4: КРИСТАЛЛЫ ЦИ ====================
  container_4: {
    name: "Кристаллы Ци",
    type: "static",
    immutable: true,
    description: "Духовные камни и их свойства",
    rules: `
-- Контейнер памяти 4 (Кристаллы Ци) --
Название в мире: "Духовные Камни"
ИЗМЕНЕНИЯ В РАМКАХ МИРА ЗАПРЕЩЕНЫ

ФОРМУЛА ИСПАРЕНИЯ КРИСТАЛЛА:

Параметры:
- ρ_крист = 1.024×10⁹ ед/м³ (плотность кристалла)
- k = 0.001 (коэффициент равновесия)
- ρ_равн = k × ρ_крист (равновесная плотность)
- S_крист = 6 × a² (площадь поверхности куба)
- α = G / ρ_равн (коэффициент испарения)

Скорость испарения:
Q_испар = α × S_крист × (ρ_равн - ρ_окр)

УСЛОВИЯ:
- При понижении уровня Ци окружения ниже критического - испарение
- Кристаллы Ци могут использоваться для пополнения резерва
- Ци из кристаллов выделяется в газообразном состоянии
- Скорость поглощения не может превышать проводимость меридиан
    `,
  },

  // ==================== CONTAINER 5: ГЕОГРАФИЯ МИРА ====================
  container_5: {
    name: "География мира",
    type: "static",
    immutable: true,
    description: "Структура мира",
    rules: `
-- Контейнер памяти 5 (География мира) --
ИЗМЕНЕНИЯ В РАМКАХ МИРА ЗАПРЕЩЕНЫ

101. Мир
- Мир искусственно создан
- Плывёт в межмировом пространстве
- Условно плоский эллипсоид
- Закругление купола - над бесконечным морем

ГЕОМЕТРИЯ:
- Обитаемая суша: радиус 100,000 км
- Кольцо "Бесконечного Моря": ширина 20,000 км
- Высота купола в центре: 10,000 км
- Высота купола на границе: 5,000 км
- Глубина недр: 6,000 км

СТРУКТУРА НЕДР:
- 0-10 км: Поверхностная кора
- 10-2,000 км: Зона лей-линий и магматических карманов
- 2,000-5,000 км: Структура Ци и "Сердце Мира"
- 5,000-6,000 км: Основание под куполом

ОСОБЕННОСТИ:
- За куполом ничего нет
- Купол обеспечивает круговорот Ци
- Сердце Мира - портал в подпространство для хранения Ци
- Места силы: радиус 100-1000 км, повышенный фон Ци

102. Климат и год
- Год: 12 месяцев
- Месяц: 30 дней
- День: 24 часа
- Два сезона: тёплый и холодный (по 6 месяцев)
- Температуры: от -100°C до +100°C

ЛЕТОИСЧИСЛЕНИЕ:
- Эра Сердца Мира (Э.С.М.)
- Текущий год: 1864

ХТОНЬЯ:
- Хтонью не рождаются, хтонью становятся
- Высокий уровень Ци пагубно влияет на новорождённых
- Исключения: древние расы (редки)
    `,
  },

  // ==================== CONTAINER 6: ХАРАКТЕРИСТИКИ ГГ ====================
  container_6: {
    name: "Характеристики ГГ",
    type: "dynamic",
    description: "Динамический контейнер персонажа",
    rules: `
-- Контейнер памяти 6 (Характеристики ГГ) --
ДИНАМИЧЕСКИЙ КОНТЕЙНЕР

666. Система и Характеристики
- Базовые характеристики — информационное представление состояния организма
- сила (увеличивается от тренировки/закалки мышц)
- ловкость (тренировка и закалка связок и суставов)
- интеллект (аналог IQ, развивается при изучении)
- проводимость (пропускная способность меридиан)
- энергия (уровень Ци в ядре)

667. Детали развития
- Точность характеристик: 0.01
- Повышение/понижение с дискретизацией 0.01
- Проводимость появляется при становлении практиком
- Формула: проводимость = объём ядра / 360 сек
- При старении - естественная деградация
- Практики под влиянием Ци останавливают регресс

668. Средние характеристики людей
- Дети: 0.1 - 5
- Подростки: 5 - 10
- Взрослые: 10 - 15
- Профессионалы: 10 - 20
- Гении (одна характеристика): до 25

777. Особенности ГГ
- Попаданец из нашего мира
- Частичная амнезия (потеряны личные воспоминания)
- Остались знания о науке, технологиях
- Потерянные воспоминания вернуть нельзя

СИСТЕМА ГГ:
- Система — информационная, без влияния на реальность
- Только у ГГ есть система
- Стартовые характеристики: 10 (эталон)
- Начальная ёмкость ядра: 1,000 единиц
- Старт в зоне низкой концентрации Ци
    `,
  },

  // ==================== CONTAINER 7: СЕКТЫ И СОЦИУМ ====================
  container_7: {
    name: "Секты и социальные структуры",
    type: "dynamic",
    description: "Общество культиваторов",
    rules: `
-- Контейнер памяти 7 (Секты и социальные структуры) --
ДИНАМИЧЕСКИЙ КОНТЕЙНЕР

900. Общее для сект
- ОВ (очки вклада) — система мотивации через труд
- ОВ тратятся на ресурсы развития
- ОВ действует только в рамках одной секты/филиала

980. Социальная структура

ИЕРАРХИЯ ПО УРОВНЯМ:
- Уровни 1.0-3.0 ("Низшие"): испытательный срок, черновая работа
- Уровни 4.0-5.0 ("Средние"): полноправные члены, могут брать учеников
- Уровни 6.0-7.0 ("Высшие"): элита региона, право вето
- Уровни 8.0+ ("Великие"): живые легенды

КЛАССИФИКАЦИЯ ПО РОДУ ДЕЯТЕЛЬНОСТИ:
- Сектанты: формальная организация, иерархия, ресурсы
- Члены гильдий: профессиональные объединения
- Свободные практики (Скитальцы): полная свобода, нет защиты
- Отшельники: высокий уровень, ушли от мирской суеты
- Тёмные практики: запрещённые методы, вне закона

ВЗАИМОДЕЙСТВИЕ С НЕ-ПРАКТИКАМИ:
- Принцип "Золотой горы": практики защищают мирян в обмен на ресурсы
- Покровительство, торговля, найм

РАЗРЕШЕНИЕ КОНФЛИКТОВ:
- Принцип "Сила — это Закон"
- Поединки разрешены по взаимному согласию
- Нарушители становятся изгнанниками
    `,
  },

  // ==================== CONTAINER 8: ГЕОЛОГИЯ И ЗОНЫ ====================
  container_8: {
    name: "Геология и зоны Ци",
    type: "static",
    immutable: true,
    description: "Распределение энергии по миру",
    rules: `
-- Контейнер памяти 8 (Геология и зоны Ци) --
СТАТИЧЕСКИЙ КОНТЕЙНЕР

990. Распределение по удалённости от центра

ВНУТРЕННЕЕ КОЛЬЦО (0-5,000 км):
- Концентрация Ци: 500-1000+ ед/м³
- Лей-линии: 1 мощная на 100-200 км²
- Максимальный уровень: 9.0-9.9

СРЕДНЕЕ КОЛЬЦО (5,000-15,000 км):
- Концентрация Ци: 200-500 ед/м³
- Лей-линии: 1 сильная на 500-1000 км²
- Максимальный уровень: 7.0-8.0

ВНЕШНЕЕ КОЛЬЦО (15,000-20,000 км):
- Концентрация Ци: 100-200 ед/м³
- Лей-линии: 1 слабая на 2000-5000 км²
- Максимальный уровень: 6.0-6.9

ПРИГРАНИЧНЫЕ ЗЕМЛИ (20,000-100,000 км):
- Концентрация Ци: 20-100 ед/м³
- Лей-линии: отсутствуют мощные
- Максимальный уровень: 4.0-5.0

МИГРАЦИОННЫЕ ПОТОКИ:
- Практики стремятся в зоны с более высокой концентрацией Ци
- Обратная миграция только при ранениях или потере потенциала
    `,
  },
} as const;

// Функция получения всех правил мира в виде строки
export function getAllWorldRules(): string {
  return Object.values(MEMORY_CONTAINERS)
    .map((container) => container.rules)
    .join("\n\n");
}

// Функция получения контейнера по номеру
export function getContainer(index: number): typeof MEMORY_CONTAINERS[keyof typeof MEMORY_CONTAINERS] | null {
  const key = `container_${index}` as keyof typeof MEMORY_CONTAINERS;
  return MEMORY_CONTAINERS[key] || null;
}

// Экспорт типов
export type MemoryContainerKey = keyof typeof MEMORY_CONTAINERS;
export type MemoryContainer = typeof MEMORY_CONTAINERS[MemoryContainerKey];
