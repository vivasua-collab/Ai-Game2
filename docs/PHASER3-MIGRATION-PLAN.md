# üéÆ –ü–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ Phaser 3

**–°–æ–∑–¥–∞–Ω–æ:** 2026-02-25
**–í–µ—Ç–∫–∞:** main2D
**–°—Ç–∞—Ç—É—Å:** üìã –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
**–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** 8-13 –¥–Ω–µ–π

---

## üìã –û–±–∑–æ—Ä –º–∏–≥—Ä–∞—Ü–∏–∏

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- –¢–µ–∫—Å—Ç–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —á–∞—Ç–æ–º
- React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è –ø–∞–Ω–µ–ª–µ–π
- Zustand –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- Prisma –¥–ª—è –¥–∞–Ω–Ω—ã—Ö
- LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### –¶–µ–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- 2D –∏–≥—Ä–æ–≤–æ–π –º–∏—Ä (Phaser 3)
- –í–∏–∑—É–∞–ª—å–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–∏
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±–æ–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ LLM –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                           APPLICATION LAYER                              ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                         ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                        NEXT.JS APP                                ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   page.tsx  ‚îÇ  ‚îÇ  Layouts    ‚îÇ  ‚îÇ   API Routes            ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (–ì–ª–∞–≤–Ω–∞—è)  ‚îÇ  ‚îÇ  (–û–±–æ–ª–æ—á–∫–∞) ‚îÇ  ‚îÇ   /api/chat, /api/...   ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                    ‚îÇ                                    ‚îÇ
‚îÇ                                    ‚ñº                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                      GAME CONTAINER                               ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ      PHASER 3 CANVAS        ‚îÇ  ‚îÇ      REACT UI PANELS      ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      WorldScene       ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    StatsPanel       ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      LocationScene    ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    InventoryPanel   ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      CombatScene      ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    TechniquesPanel  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ      MeditationScene  ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ    ChatPanel        ‚îÇ  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                    ‚îÇ                                    ‚îÇ
‚îÇ                                    ‚ñº                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                       GAME BRIDGE                                 ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ           (–°–≤—è–∑—å Phaser ‚Üî React ‚Üî API ‚Üî Database)                ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                    ‚îÇ                                    ‚îÇ
‚îÇ                                    ‚ñº                                    ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ                     EXISTING BACKEND                              ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ   Prisma    ‚îÇ  ‚îÇ   LLM API   ‚îÇ  ‚îÇ   Game Services         ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îÇ  (SQLite)   ‚îÇ  ‚îÇ   (Z-AI)    ‚îÇ  ‚îÇ   (qi-system, etc.)     ‚îÇ   ‚îÇ  ‚îÇ
‚îÇ  ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îÇ                                                                         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üì¶ –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–î–µ–Ω—å 1)

### 1.1 –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Phaser 3
bun add phaser

# –¢–∏–ø—ã –¥–ª—è TypeScript
bun add -D @types/phaser
```

### 1.2 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```
src/
‚îú‚îÄ‚îÄ game/                          # –ù–æ–≤—ã–π –º–æ–¥—É–ª—å Phaser
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ game.config.ts         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ scenes.config.ts       # –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å—Ü–µ–Ω
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ assets.config.ts       # –ü—É—Ç–∏ –∫ –∞—Å—Å–µ—Ç–∞–º
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ scenes/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BaseScene.ts           # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å—Ü–µ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ BootScene.ts           # –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PreloadScene.ts        # –ü—Ä–µ–ª–æ–∞–¥–µ—Ä
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WorldScene.ts          # –ö–∞—Ä—Ç–∞ –º–∏—Ä–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LocationScene.ts       # –õ–æ–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CombatScene.ts         # –ë–æ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MeditationScene.ts     # –ú–µ–¥–∏—Ç–∞—Ü–∏—è
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Entity.ts              # –ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Player.ts              # –ò–≥—Ä–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ NPC.ts                 # NPC
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Enemy.ts               # –í—Ä–∞–≥
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResourceNode.ts        # –†–µ—Å—É—Ä—Å
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ components/                # Phaser UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DialogBox.ts           # –î–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ActionMenu.ts          # –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HealthBar.ts           # –ü–æ–ª–æ—Å–∞ –∑–¥–æ—Ä–æ–≤—å—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QiBar.ts               # –ü–æ–ª–æ—Å–∞ –¶–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Tooltip.ts             # –ü–æ–¥—Å–∫–∞–∑–∫–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ systems/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InputSystem.ts         # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–≤–æ–¥–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MovementSystem.ts      # –î–≤–∏–∂–µ–Ω–∏–µ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InteractionSystem.ts   # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ AnimationSystem.ts     # –ê–Ω–∏–º–∞—Ü–∏–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ assetLoader.ts         # –ó–∞–≥—Ä—É–∑—á–∏–∫ –∞—Å—Å–µ—Ç–æ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sceneManager.ts        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ debug.ts               # –û—Ç–ª–∞–¥–∫–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ constants/
‚îÇ       ‚îú‚îÄ‚îÄ colors.ts              # –¶–≤–µ—Ç–∞
‚îÇ       ‚îú‚îÄ‚îÄ depths.ts              # –°–ª–æ–∏ (z-index)
‚îÇ       ‚îî‚îÄ‚îÄ animations.ts          # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∞–Ω–∏–º–∞—Ü–∏–π
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ game/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameContainer.tsx      # React-–æ–±—ë—Ä—Ç–∫–∞ –¥–ª—è Phaser
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GameCanvas.tsx         # Canvas –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ GameProvider.tsx       # –ö–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è —Å–≤—è–∑–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ panels/                    # React UI –ø–∞–Ω–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ StatsPanel.tsx
‚îÇ       ‚îú‚îÄ‚îÄ InventoryPanel.tsx
‚îÇ       ‚îú‚îÄ‚îÄ TechniquesPanel.tsx
‚îÇ       ‚îî‚îÄ‚îÄ ChatPanel.tsx
‚îÇ
‚îî‚îÄ‚îÄ services/
    ‚îî‚îÄ‚îÄ game-bridge.service.ts     # –ú–æ—Å—Ç Phaser ‚Üî React
```

### 1.3 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 1

- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `phaser` –∏ `@types/phaser`
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫ `/src/game/`
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Ñ–∏–≥–∏
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TypeScript –¥–ª—è Phaser
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É

---

## üì¶ –≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤—ã–π Phaser Setup (–î–µ–Ω—å 2)

### 2.1 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã

```typescript
// src/game/config/game.config.ts

import Phaser from 'phaser';
import { BootScene } from '../scenes/BootScene';
import { PreloadScene } from '../scenes/PreloadScene';
import { WorldScene } from '../scenes/WorldScene';

export const GAME_CONFIG: Phaser.Types.Core.GameConfig = {
  type: Phaser.AUTO,
  width: 900,
  height: 550,
  backgroundColor: '#1a1a2e',
  parent: 'game-container',
  
  physics: {
    default: 'arcade',
    arcade: {
      gravity: { x: 0, y: 0 },
      debug: false,
    },
  },
  
  scene: [BootScene, PreloadScene, WorldScene],
  
  scale: {
    mode: Phaser.Scale.FIT,
    autoCenter: Phaser.Scale.CENTER_BOTH,
  },
  
  render: {
    pixelArt: true,
    antialias: false,
  },
};
```

### 2.2 –ë–∞–∑–æ–≤–∞—è —Å—Ü–µ–Ω–∞

```typescript
// src/game/scenes/BaseScene.ts

import Phaser from 'phaser';
import { GameBridge } from '@/services/game-bridge.service';

export abstract class BaseScene extends Phaser.Scene {
  protected bridge: GameBridge;
  
  constructor(config: string | Phaser.Types.Scenes.SettingsConfig) {
    super(config);
    this.bridge = GameBridge.getInstance();
  }
  
  // –û–±—â–∏–π –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è UI
  protected createUI(): void {
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞—Ö
  }
  
  // –û–±—â–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–≤–æ–¥–∞
  protected setupInput(): void {
    // –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–∞—Ö
  }
  
  // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –¥—Ä—É–≥–æ–π —Å—Ü–µ–Ω–µ —Å –¥–∞–Ω–Ω—ã–º–∏
  protected goToScene(sceneName: string, data?: object): void {
    this.scene.start(sceneName, data);
  }
}
```

### 2.3 React-–æ–±—ë—Ä—Ç–∫–∞

```typescript
// src/components/game/GameContainer.tsx
'use client';

import { useEffect, useRef, useState } from 'react';
import Phaser from 'phaser';
import { GAME_CONFIG } from '@/game/config/game.config';
import { GameBridge } from '@/services/game-bridge.service';

interface GameContainerProps {
  sessionId: string;
  onStateChange?: (state: unknown) => void;
}

export function GameContainer({ sessionId, onStateChange }: GameContainerProps) {
  const containerRef = useRef<HTMLDivElement>(null);
  const gameRef = useRef<Phaser.Game | null>(null);
  const [isReady, setIsReady] = useState(false);
  
  useEffect(() => {
    if (!containerRef.current || gameRef.current) return;
    
    // –°–æ–∑–¥–∞—ë–º –∏–≥—Ä—É
    const game = new Phaser.Game({
      ...GAME_CONFIG,
      parent: containerRef.current,
    });
    
    gameRef.current = game;
    
    // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –≤ –º–æ—Å—Ç–µ
    const bridge = GameBridge.getInstance();
    bridge.setGame(game);
    bridge.setSessionId(sessionId);
    
    // –°–æ–±—ã—Ç–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
    game.events.once('ready', () => {
      setIsReady(true);
    });
    
    // –û—á–∏—Å—Ç–∫–∞
    return () => {
      game.destroy(true);
      gameRef.current = null;
    };
  }, [sessionId]);
  
  return (
    <div className="relative w-full h-full">
      <div 
        ref={containerRef} 
        id="game-container"
        className="w-full h-[550px] rounded-lg overflow-hidden border border-border"
      />
      
      {!isReady && (
        <div className="absolute inset-0 flex items-center justify-center bg-background/80">
          <div className="text-center">
            <div className="animate-spin w-8 h-8 border-2 border-primary border-t-transparent rounded-full mx-auto mb-2" />
            <p className="text-muted-foreground">–ó–∞–≥—Ä—É–∑–∫–∞ –º–∏—Ä–∞...</p>
          </div>
        </div>
      )}
    </div>
  );
}
```

### 2.4 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 2

- [ ] –°–æ–∑–¥–∞—Ç—å `game.config.ts`
- [ ] –°–æ–∑–¥–∞—Ç—å `BaseScene.ts`
- [ ] –°–æ–∑–¥–∞—Ç—å `BootScene.ts` (–ø—É—Å—Ç–∞—è)
- [ ] –°–æ–∑–¥–∞—Ç—å `GameContainer.tsx`
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ `page.tsx`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø—É—Å–∫ –∏–≥—Ä—ã (—á—ë—Ä–Ω—ã–π —ç–∫—Ä–∞–Ω = —É—Å–ø–µ—Ö)

---

## üì¶ –≠—Ç–∞–ø 3: –ö–∞—Ä—Ç–∞ –º–∏—Ä–∞ (–î–Ω–∏ 3-4)

### 3.1 –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Å—Å–µ—Ç–æ–≤

```typescript
// src/game/scenes/BootScene.ts

import Phaser from 'phaser';
import { BaseScene } from './BaseScene';

export class BootScene extends BaseScene {
  constructor() {
    super({ key: 'BootScene' });
  }
  
  preload(): void {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
    this.createProgressBar();
    
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –∞—Å—Å–µ—Ç—ã
    this.load.image('player', '/assets/sprites/player.png');
    this.load.image('location-marker', '/assets/sprites/location-marker.png');
    this.load.image('location-visited', '/assets/sprites/location-visited.png');
    this.load.image('fog', '/assets/sprites/fog.png');
    
    // UI —ç–ª–µ–º–µ–Ω—Ç—ã
    this.load.image('button', '/assets/ui/button.png');
    this.load.image('panel', '/assets/ui/panel.png');
  }
  
  create(): void {
    // –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ –∫–∞—Ä—Ç–µ –º–∏—Ä–∞
    this.scene.start('WorldScene');
  }
  
  private createProgressBar(): void {
    const width = this.cameras.main.width;
    const height = this.cameras.main.height;
    
    const progressBar = this.add.rectangle(
      width / 2, height / 2, 400, 30, 0x222222
    );
    const progressBox = this.add.rectangle(
      width / 2, height / 2, 410, 35, 0x444444
    );
    
    this.load.on('progress', (value: number) => {
      progressBar.width = 400 * value;
    });
  }
}
```

### 3.2 –°—Ü–µ–Ω–∞ –∫–∞—Ä—Ç—ã –º–∏—Ä–∞

```typescript
// src/game/scenes/WorldScene.ts

import Phaser from 'phaser';
import { BaseScene } from './BaseScene';
import type { Location } from '@/types/game';

interface WorldSceneData {
  locations: Location[];
  playerLocationId: string;
}

export class WorldScene extends BaseScene {
  private locations: Map<string, Phaser.GameObjects.Container> = new Map();
  private player!: Phaser.GameObjects.Sprite;
  private playerLocationId: string = '';
  
  constructor() {
    super({ key: 'WorldScene' });
  }
  
  init(data: WorldSceneData): void {
    this.playerLocationId = data.playerLocationId;
  }
  
  async create(): Promise<void> {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –ª–æ–∫–∞—Ü–∏–∏ –∏–∑ API
    await this.loadLocations();
    
    // –°–æ–∑–¥–∞—ë–º –∫–∞—Ä—Ç—É
    this.createWorldMap();
    
    // –°–æ–∑–¥–∞—ë–º –∏–≥—Ä–æ–∫–∞
    this.createPlayer();
    
    // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–≤–æ–¥
    this.setupInput();
    
    // –ó–∞–ø—É—Å–∫–∞–µ–º UI —Å—Ü–µ–Ω—É
    this.scene.launch('UIScene');
  }
  
  private async loadLocations(): Promise<void> {
    const locations = await this.bridge.getLocations();
    this.renderLocations(locations);
  }
  
  private renderLocations(locations: Location[]): void {
    locations.forEach((loc) => {
      const container = this.createLocationMarker(loc);
      this.locations.set(loc.id, container);
    });
  }
  
  private createLocationMarker(location: Location): Phaser.GameObjects.Container {
    const x = location.x || 0;
    const y = location.y || 0;
    
    const container = this.add.container(x, y);
    
    // –ú–∞—Ä–∫–µ—Ä –ª–æ–∫–∞—Ü–∏–∏
    const marker = this.add.image(0, 0, 'location-marker');
    marker.setInteractive({ useHandCursor: true });
    
    // –ù–∞–∑–≤–∞–Ω–∏–µ
    const name = this.add.text(0, 40, location.name, {
      fontSize: '14px',
      color: '#ffffff',
    }).setOrigin(0.5);
    
    // –ò–∫–æ–Ω–∫–∞ —Ç–∏–ø–∞
    const icon = this.add.text(0, 0, this.getLocationIcon(location.terrainType), {
      fontSize: '24px',
    }).setOrigin(0.5);
    
    container.add([marker, icon, name]);
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
    marker.on('pointerdown', () => {
      this.onLocationClick(location);
    });
    
    // Hover —ç—Ñ—Ñ–µ–∫—Ç
    marker.on('pointerover', () => {
      container.setScale(1.1);
    });
    marker.on('pointerout', () => {
      container.setScale(1);
    });
    
    return container;
  }
  
  private getLocationIcon(terrainType?: string | null): string {
    const icons: Record<string, string> = {
      forest: 'üå≤',
      mountain: 'üèîÔ∏è',
      water: 'üåä',
      desert: 'üèúÔ∏è',
      plains: 'üåæ',
      cave: 'üï≥Ô∏è',
      temple: 'üõï',
      village: 'üèòÔ∏è',
    };
    return icons[terrainType || 'plains'] || 'üìç';
  }
  
  private createPlayer(): void {
    const playerLoc = this.locations.get(this.playerLocationId);
    const x = playerLoc?.x || 450;
    const y = playerLoc?.y || 275;
    
    this.player = this.add.sprite(x, y, 'player');
    this.player.setDepth(100);
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏—è
    this.tweens.add({
      targets: this.player,
      y: y - 5,
      duration: 1000,
      yoyo: true,
      repeat: -1,
      ease: 'Sine.easeInOut',
    });
  }
  
  private onLocationClick(location: Location): void {
    // –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ª–æ–∫–∞—Ü–∏–∏
    this.bridge.setCurrentLocation(location.id);
    this.scene.start('LocationScene', { locationId: location.id });
  }
  
  private setupInput(): void {
    // –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞
    this.input.keyboard?.on('keydown-ESC', () => {
      // –û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é
    });
  }
}
```

### 3.3 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 3

- [ ] –°–æ–∑–¥–∞—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∞—Å—Å–µ—Ç—ã (–º–∞—Ä–∫–µ—Ä—ã, –∏–∫–æ–Ω–∫–∏)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å BootScene —Å –∑–∞–≥—Ä—É–∑–∫–æ–π
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å WorldScene
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–π –∏–∑ –ë–î
- [ ] –ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- [ ] –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ª–æ–∫–∞—Ü–∏–∏

---

## üì¶ –≠—Ç–∞–ø 4: –°—Ü–µ–Ω–∞ –ª–æ–∫–∞—Ü–∏–∏ (–î–Ω–∏ 5-6)

### 4.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ª–æ–∫–∞—Ü–∏–∏

```typescript
// src/game/scenes/LocationScene.ts

import Phaser from 'phaser';
import { BaseScene } from './BaseScene';
import type { Location, Character, NPC } from '@/types/game';

interface LocationSceneData {
  locationId: string;
}

export class LocationScene extends BaseScene {
  private location!: Location;
  private character!: Character;
  private npcs: NPC[] = [];
  private actionMenu!: Phaser.GameObjects.Container;
  
  constructor() {
    super({ key: 'LocationScene' });
  }
  
  async init(data: LocationSceneData): void {
    // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ª–æ–∫–∞—Ü–∏–∏
    this.location = await this.bridge.getLocation(data.locationId);
    this.character = await this.bridge.getCharacter();
    this.npcs = await this.bridge.getNPCs(data.locationId);
  }
  
  create(): void {
    // –§–æ–Ω –ª–æ–∫–∞—Ü–∏–∏
    this.createBackground();
    
    // –ò–≥—Ä–æ–∫
    this.createPlayerCharacter();
    
    // NPC
    this.createNPCs();
    
    // –†–µ—Å—É—Ä—Å—ã
    this.createResources();
    
    // –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
    this.createActionMenu();
    
    // UI
    this.createLocationUI();
    
    // –í–≤–æ–¥
    this.setupInput();
  }
  
  private createBackground(): void {
    // –¶–≤–µ—Ç —Ñ–æ–Ω–∞ –ø–æ —Ç–∏–ø—É –º–µ—Å—Ç–Ω–æ—Å—Ç–∏
    const colors: Record<string, number> = {
      forest: 0x1a4d1a,
      mountain: 0x4a4a4a,
      water: 0x1a3d5c,
      desert: 0xc2a860,
      temple: 0x2a2a4a,
      village: 0x3d3d3d,
    };
    
    const color = colors[this.location.terrainType || 'forest'] || 0x1a1a2e;
    this.cameras.main.setBackgroundColor(color);
    
    // –î–µ–∫–æ—Ä–∞—Ü–∏–∏
    this.createDecorations();
  }
  
  private createDecorations(): void {
    // –î–µ—Ä–µ–≤—å—è, –∫–∞–º–Ω–∏, etc.
    const decorationCount = Phaser.Math.Between(3, 8);
    
    for (let i = 0; i < decorationCount; i++) {
      const x = Phaser.Math.Between(50, 850);
      const y = Phaser.Math.Between(50, 450);
      
      const decoration = this.add.text(x, y, this.getRandomDecoration(), {
        fontSize: '32px',
      }).setAlpha(0.6);
      
      decoration.setDepth(1);
    }
  }
  
  private getRandomDecoration(): string {
    const decorations = ['üåø', 'üçÇ', 'ü™®', 'üåæ', 'ü™µ', 'üå∏'];
    return decorations[Phaser.Math.Between(0, decorations.length - 1)];
  }
  
  private createPlayerCharacter(): void {
    this.player = this.add.sprite(450, 300, 'player');
    this.player.setScale(2);
    this.player.setDepth(50);
    
    // –ò–º—è –∏–≥—Ä–æ–∫–∞
    this.add.text(450, 350, this.character.name || '–ò–≥—Ä–æ–∫', {
      fontSize: '14px',
      color: '#ffffff',
    }).setOrigin(0.5).setDepth(51);
  }
  
  private createNPCs(): void {
    this.npcs.forEach((npc, index) => {
      const x = 200 + index * 200;
      const y = 250;
      
      const npcSprite = this.add.sprite(x, y, 'npc');
      npcSprite.setInteractive({ useHandCursor: true });
      npcSprite.setDepth(40);
      
      // –ò–º—è NPC
      this.add.text(x, y + 40, npc.name, {
        fontSize: '12px',
        color: '#ffdd00',
      }).setOrigin(0.5).setDepth(41);
      
      // –ö–ª–∏–∫ –¥–ª—è –¥–∏–∞–ª–æ–≥–∞
      npcSprite.on('pointerdown', () => {
        this.startDialog(npc);
      });
    });
  }
  
  private createActionMenu(): void {
    const menuX = 450;
    const menuY = 450;
    
    this.actionMenu = this.add.container(menuX, menuY);
    this.actionMenu.setDepth(100);
    
    const actions = [
      { label: 'üîç –û—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è', action: 'examine' },
      { label: 'üßò –ú–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å', action: 'meditate' },
      { label: 'üó∫Ô∏è –ö–∞—Ä—Ç–∞', action: 'map' },
      { label: 'üí¨ –ß–∞—Ç', action: 'chat' },
    ];
    
    actions.forEach((act, i) => {
      const btn = this.createButton(-150 + i * 100, 0, act.label);
      btn.on('pointerdown', () => this.handleAction(act.action));
      this.actionMenu.add(btn);
    });
  }
  
  private createButton(x: number, y: number, text: string): Phaser.GameObjects.Container {
    const container = this.add.container(x, y);
    
    const bg = this.add.rectangle(0, 0, 90, 35, 0x333333, 0.9)
      .setStrokeStyle(2, 0x666666);
    
    const label = this.add.text(0, 0, text, {
      fontSize: '12px',
      color: '#ffffff',
    }).setOrigin(0.5);
    
    container.add([bg, label]);
    container.setSize(90, 35);
    container.setInteractive({ useHandCursor: true });
    
    // Hover
    container.on('pointerover', () => bg.setFillStyle(0x444444));
    container.on('pointerout', () => bg.setFillStyle(0x333333));
    
    return container;
  }
  
  private async handleAction(action: string): Promise<void> {
    switch (action) {
      case 'examine':
        await this.examineLocation();
        break;
      case 'meditate':
        this.scene.start('MeditationScene', { locationId: this.location.id });
        break;
      case 'map':
        this.scene.start('WorldScene');
        break;
      case 'chat':
        this.bridge.toggleChat();
        break;
    }
  }
  
  private async examineLocation(): Promise<void> {
    const response = await this.bridge.sendAction('–û—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è');
    this.showNarration(response);
  }
  
  private showNarration(text: string): void {
    // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—Å—Ç –ø–æ–≤–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
    const box = this.add.rectangle(450, 520, 800, 60, 0x000000, 0.8);
    const narration = this.add.text(450, 520, text, {
      fontSize: '14px',
      color: '#ffffff',
      wordWrap: { width: 780 },
    }).setOrigin(0.5);
    
    // –ê–≤—Ç–æ—Å–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 5 —Å–µ–∫
    this.time.delayedCall(5000, () => {
      box.destroy();
      narration.destroy();
    });
  }
  
  private setupInput(): void {
    this.input.keyboard?.on('keydown-ESC', () => {
      this.scene.start('WorldScene');
    });
  }
}
```

### 4.2 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 4

- [ ] –°–æ–∑–¥–∞—Ç—å LocationScene
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ª–æ–∫–∞—Ü–∏–∏
- [ ] –û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Ñ–æ–Ω–∞ –ø–æ —Ç–∏–ø—É
- [ ] –†–∞–∑–º–µ—â–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
- [ ] –†–∞–∑–º–µ—â–µ–Ω–∏–µ NPC
- [ ] –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å API (examine, meditate)
- [ ] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ü–µ–Ω–∞–º–∏

---

## üì¶ –≠—Ç–∞–ø 5: –°—Ü–µ–Ω–∞ –±–æ—è (–î–Ω–∏ 7-8)

### 5.1 –ë–æ–µ–≤–∞—è —Å—Ü–µ–Ω–∞

```typescript
// src/game/scenes/CombatScene.ts

import Phaser from 'phaser';
import { BaseScene } from './BaseScene';

interface CombatSceneData {
  enemyId: string;
  locationId: string;
}

interface CombatState {
  playerHp: number;
  playerMaxHp: number;
  playerQi: number;
  playerMaxQi: number;
  enemyHp: number;
  enemyMaxHp: number;
  turn: 'player' | 'enemy';
  log: string[];
}

export class CombatScene extends BaseScene {
  private enemyId!: string;
  private locationId!: string;
  private state!: CombatState;
  private playerSprite!: Phaser.GameObjects.Sprite;
  private enemySprite!: Phaser.GameObjects.Sprite;
  private actionButtons: Phaser.GameObjects.Container[] = [];
  private isAnimating: boolean = false;
  
  constructor() {
    super({ key: 'CombatScene' });
  }
  
  async init(data: CombatSceneData): void {
    this.enemyId = data.enemyId;
    this.locationId = data.locationId;
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
    this.state = await this.bridge.initCombat(data.enemyId);
  }
  
  create(): void {
    // –§–æ–Ω
    this.createBattleBackground();
    
    // –ü–µ—Ä—Å–æ–Ω–∞–∂–∏
    this.createCombatants();
    
    // UI
    this.createHealthBars();
    this.createActionButtons();
    this.createCombatLog();
    
    // –ù–∞—á–∞–ª–æ –±–æ—è
    this.showCombatStart();
  }
  
  private createBattleBackground(): void {
    // –ó–∞—Ç–µ–º–Ω—ë–Ω–Ω—ã–π —Ñ–æ–Ω
    this.add.rectangle(450, 275, 900, 550, 0x000000, 0.5);
    
    // –ê—Ä–µ–Ω–∞
    this.add.ellipse(450, 350, 700, 200, 0x1a1a2e, 0.8);
  }
  
  private createCombatants(): void {
    // –ò–≥—Ä–æ–∫ —Å–ª–µ–≤–∞
    this.playerSprite = this.add.sprite(250, 300, 'player');
    this.playerSprite.setScale(2.5);
    this.playerSprite.setFlipX(false);
    
    // –í—Ä–∞–≥ —Å–ø—Ä–∞–≤–∞
    this.enemySprite = this.add.sprite(650, 300, 'enemy');
    this.enemySprite.setScale(2.5);
    this.enemySprite.setFlipX(true);
    
    // –ò–º–µ–Ω–∞
    this.add.text(250, 380, '–¢—ã', {
      fontSize: '16px',
      color: '#4ade80',
    }).setOrigin(0.5);
    
    this.add.text(650, 380, '–í—Ä–∞–≥', {
      fontSize: '16px',
      color: '#ef4444',
    }).setOrigin(0.5);
  }
  
  private createHealthBars(): void {
    // HP –∏–≥—Ä–æ–∫–∞
    this.createBar(150, 100, 200, 25, () => this.state.playerHp / this.state.playerMaxHp, 0x4ade80);
    this.add.text(150, 85, 'HP', { fontSize: '12px', color: '#ffffff' });
    
    // –¶–∏ –∏–≥—Ä–æ–∫–∞
    this.createBar(150, 140, 200, 20, () => this.state.playerQi / this.state.playerMaxQi, 0x3b82f6);
    this.add.text(150, 125, '–¶–∏', { fontSize: '12px', color: '#ffffff' });
    
    // HP –≤—Ä–∞–≥–∞
    this.createBar(550, 100, 200, 25, () => this.state.enemyHp / this.state.enemyMaxHp, 0xef4444);
    this.add.text(550, 85, 'HP –≤—Ä–∞–≥–∞', { fontSize: '12px', color: '#ffffff' });
  }
  
  private createBar(
    x: number, y: number, width: number, height: number,
    getProgress: () => number, color: number
  ): Phaser.GameObjects.Graphics {
    const bar = this.add.graphics();
    
    const draw = () => {
      bar.clear();
      const progress = getProgress();
      
      // –§–æ–Ω
      bar.fillStyle(0x333333);
      bar.fillRect(x, y, width, height);
      
      // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ
      bar.fillStyle(color);
      bar.fillRect(x, y, width * progress, height);
      
      // –†–∞–º–∫–∞
      bar.lineStyle(2, 0x666666);
      bar.strokeRect(x, y, width, height);
    };
    
    draw();
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π –∫–∞–¥—Ä
    this.events.on('update', draw);
    
    return bar;
  }
  
  private createActionButtons(): void {
    const actions = [
      { label: '‚öîÔ∏è –ê—Ç–∞–∫–∞', action: 'attack', qiCost: 0 },
      { label: 'üî• –¢–µ—Ö–Ω–∏–∫–∞', action: 'technique', qiCost: 20 },
      { label: 'üõ°Ô∏è –ó–∞—â–∏—Ç–∞', action: 'defend', qiCost: 5 },
      { label: 'üèÉ –ë–µ–≥—Å—Ç–≤–æ', action: 'flee', qiCost: 0 },
    ];
    
    actions.forEach((act, i) => {
      const btn = this.createCombatButton(200 + i * 130, 480, act);
      this.actionButtons.push(btn);
    });
  }
  
  private createCombatButton(
    x: number, y: number, action: { label: string; action: string; qiCost: number }
  ): Phaser.GameObjects.Container {
    const container = this.add.container(x, y);
    
    const bg = this.add.rectangle(0, 0, 120, 45, 0x333333, 0.9)
      .setStrokeStyle(2, 0x666666);
    
    const label = this.add.text(0, -5, action.label, {
      fontSize: '14px',
      color: '#ffffff',
    }).setOrigin(0.5);
    
    const cost = this.add.text(0, 12, action.qiCost > 0 ? `${action.qiCost} –¶–∏` : '', {
      fontSize: '10px',
      color: '#3b82f6',
    }).setOrigin(0.5);
    
    container.add([bg, label, cost]);
    container.setSize(120, 45);
    container.setInteractive({ useHandCursor: true });
    
    container.on('pointerdown', () => {
      if (this.state.turn === 'player' && !this.isAnimating) {
        this.executeAction(action.action, action.qiCost);
      }
    });
    
    container.on('pointerover', () => bg.setFillStyle(0x444444));
    container.on('pointerout', () => bg.setFillStyle(0x333333));
    
    return container;
  }
  
  private async executeAction(action: string, qiCost: number): Promise<void> {
    if (this.state.playerQi < qiCost) {
      this.showFloatingText(250, 250, '–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¶–∏!', '#ef4444');
      return;
    }
    
    this.isAnimating = true;
    this.disableButtons();
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –∞—Ç–∞–∫–∏
    await this.playAttackAnimation(action);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const result = await this.bridge.executeCombatAction(action);
    
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    this.updateState(result);
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω–µ—Ü –±–æ—è
    if (result.combatEnd) {
      await this.endCombat(result);
    } else {
      // –•–æ–¥ –≤—Ä–∞–≥–∞
      await this.enemyTurn();
    }
    
    this.isAnimating = false;
    this.enableButtons();
  }
  
  private async playAttackAnimation(action: string): Promise<void> {
    return new Promise((resolve) => {
      if (action === 'attack') {
        // –î–≤–∏–∂–µ–Ω–∏–µ –∫ –≤—Ä–∞–≥—É
        this.tweens.add({
          targets: this.playerSprite,
          x: 550,
          duration: 200,
          yoyo: true,
          onYoyo: () => {
            // –≠—Ñ—Ñ–µ–∫—Ç —É–¥–∞—Ä–∞
            this.showDamageEffect(650, 300);
          },
          onComplete: resolve,
        });
      } else if (action === 'technique') {
        // –≠—Ñ—Ñ–µ–∫—Ç —Ç–µ—Ö–Ω–∏–∫–∏
        this.showTechniqueEffect();
        this.time.delayedCall(500, resolve);
      } else {
        resolve();
      }
    });
  }
  
  private showDamageEffect(x: number, y: number): void {
    const particles = this.add.particles(x, y, 'particle', {
      speed: { min: 50, max: 100 },
      scale: { start: 0.5, end: 0 },
      lifespan: 300,
      quantity: 10,
    });
    
    this.time.delayedCall(300, () => particles.destroy());
  }
  
  private showTechniqueEffect(): void {
    // –ö—Ä–∞—Å–Ω–∞—è –≤—Å–ø—ã—à–∫–∞
    const flash = this.add.rectangle(450, 275, 900, 550, 0xff0000, 0.3);
    
    this.tweens.add({
      targets: flash,
      alpha: 0,
      duration: 300,
      onComplete: () => flash.destroy(),
    });
  }
  
  private async enemyTurn(): Promise<void> {
    this.state.turn = 'enemy';
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –≤—Ä–∞–≥–∞
    await new Promise<void>((resolve) => {
      this.tweens.add({
        targets: this.enemySprite,
        x: 350,
        duration: 200,
        yoyo: true,
        onYoyo: () => this.showDamageEffect(250, 300),
        onComplete: () => resolve(),
      });
    });
    
    // –ü–æ–ª—É—á–∞–µ–º –¥–µ–π—Å—Ç–≤–∏–µ –≤—Ä–∞–≥–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞
    const result = await this.bridge.getEnemyAction();
    
    this.updateState(result);
    this.addLog(`–í—Ä–∞–≥ –∞—Ç–∞–∫—É–µ—Ç! –£—Ä–æ–Ω: ${result.damage}`);
    
    if (result.combatEnd) {
      await this.endCombat(result);
    } else {
      this.state.turn = 'player';
    }
  }
  
  private async endCombat(result: { victory: boolean; loot?: unknown }): Promise<void> {
    if (result.victory) {
      this.showVictoryScreen(result.loot);
    } else {
      this.showDefeatScreen();
    }
    
    await new Promise<void>((resolve) => {
      this.time.delayedCall(2000, resolve);
    });
    
    this.scene.start('LocationScene', { locationId: this.locationId });
  }
  
  private showVictoryScreen(loot?: unknown): void {
    const overlay = this.add.rectangle(450, 275, 900, 550, 0x000000, 0.7);
    const text = this.add.text(450, 250, 'üèÜ –ü–û–ë–ï–î–ê!', {
      fontSize: '48px',
      color: '#4ade80',
    }).setOrigin(0.5);
    
    if (loot) {
      this.add.text(450, 320, `–î–æ–±—ã—á–∞: ${JSON.stringify(loot)}`, {
        fontSize: '18px',
        color: '#ffffff',
      }).setOrigin(0.5);
    }
  }
  
  private showDefeatScreen(): void {
    this.add.rectangle(450, 275, 900, 550, 0x000000, 0.7);
    this.add.text(450, 275, 'üíÄ –ü–û–†–ê–ñ–ï–ù–ò–ï', {
      fontSize: '48px',
      color: '#ef4444',
    }).setOrigin(0.5);
  }
  
  private updateState(result: Partial<CombatState>): void {
    Object.assign(this.state, result);
  }
  
  private addLog(message: string): void {
    this.state.log.push(message);
    // –û–±–Ω–æ–≤–∏—Ç—å UI –ª–æ–≥–∞
  }
  
  private showFloatingText(x: number, y: number, text: string, color: string): void {
    const floatingText = this.add.text(x, y, text, {
      fontSize: '16px',
      color,
    }).setOrigin(0.5);
    
    this.tweens.add({
      targets: floatingText,
      y: y - 50,
      alpha: 0,
      duration: 1000,
      onComplete: () => floatingText.destroy(),
    });
  }
  
  private disableButtons(): void {
    this.actionButtons.forEach(btn => btn.setAlpha(0.5));
  }
  
  private enableButtons(): void {
    this.actionButtons.forEach(btn => btn.setAlpha(1));
  }
  
  private createCombatLog(): void {
    // –õ–æ–≥ –±–æ—è –≤–Ω–∏–∑—É
    const logBox = this.add.rectangle(450, 530, 800, 40, 0x000000, 0.6);
  }
}
```

### 5.2 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 5

- [ ] –°–æ–∑–¥–∞—Ç—å CombatScene
- [ ] –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–æ—è
- [ ] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–æ–π—Ü–æ–≤
- [ ] HP/–¶–∏ –±–∞—Ä—ã
- [ ] –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏ –∞—Ç–∞–∫
- [ ] –•–æ–¥ –≤—Ä–∞–≥–∞
- [ ] –≠—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü
- [ ] –≠–∫—Ä–∞–Ω –ø–æ–±–µ–¥—ã/–ø–æ—Ä–∞–∂–µ–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π

---

## üì¶ –≠—Ç–∞–ø 6: –°—Ü–µ–Ω–∞ –º–µ–¥–∏—Ç–∞—Ü–∏–∏ (–î–µ–Ω—å 9)

### 6.1 –ú–µ–¥–∏—Ç–∞—Ü–∏—è —Å —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏

```typescript
// src/game/scenes/MeditationScene.ts

import Phaser from 'phaser';
import { BaseScene } from './BaseScene';

interface MeditationSceneData {
  locationId: string;
  duration?: number; // –ú–∏–Ω—É—Ç—ã
}

export class MeditationScene extends BaseScene {
  private locationId!: string;
  private duration: number = 60;
  private progress: number = 0;
  private qiGained: number = 0;
  private isComplete: boolean = false;
  
  constructor() {
    super({ key: 'MeditationScene' });
  }
  
  init(data: MeditationSceneData): void {
    this.locationId = data.locationId;
    this.duration = data.duration || 60;
  }
  
  create(): void {
    this.createMeditationBackground();
    this.createCharacter();
    this.createQiParticles();
    this.createProgressBar();
    this.createCancelButton();
    
    // –ó–∞–ø—É—Å–∫ –º–µ–¥–∏—Ç–∞—Ü–∏–∏
    this.startMeditation();
  }
  
  private createMeditationBackground(): void {
    // –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω
    const graphics = this.add.graphics();
    
    // –°–æ–∑–¥–∞—ë–º –≥—Ä–∞–¥–∏–µ–Ω—Ç
    for (let i = 0; i < 550; i++) {
      const alpha = 0.3 + (i / 550) * 0.3;
      graphics.fillStyle(0x1a1a4e, alpha);
      graphics.fillRect(0, i, 900, 1);
    }
    
    // –≠—Ñ—Ñ–µ–∫—Ç "–¥—ã—Ö–∞–Ω–∏—è" —Ñ–æ–Ω–∞
    this.tweens.add({
      targets: graphics,
      alpha: { from: 0.8, to: 1 },
      duration: 2000,
      yoyo: true,
      repeat: -1,
    });
  }
  
  private createCharacter(): void {
    // –ü–µ—Ä—Å–æ–Ω–∞–∂ –≤ –ø–æ–∑–µ –º–µ–¥–∏—Ç–∞—Ü–∏–∏
    const player = this.add.sprite(450, 350, 'player');
    player.setScale(3);
    
    // –õ—ë–≥–∫–æ–µ –ø–æ–∫–∞—á–∏–≤–∞–Ω–∏–µ
    this.tweens.add({
      targets: player,
      y: 345,
      duration: 3000,
      yoyo: true,
      repeat: -1,
      ease: 'Sine.easeInOut',
    });
    
    // –ê—É—Ä–∞ –≤–æ–∫—Ä—É–≥ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
    const aura = this.add.circle(450, 350, 80, 0x3b82f6, 0.2);
    
    this.tweens.add({
      targets: aura,
      scaleX: 1.3,
      scaleY: 1.3,
      alpha: 0,
      duration: 2000,
      repeat: -1,
    });
  }
  
  private createQiParticles(): void {
    // –ß–∞—Å—Ç–∏—Ü—ã –¶–∏ –ø–æ–¥–Ω–∏–º–∞—é—Ç—Å—è –≤–≤–µ—Ä—Ö
    const particles = this.add.particles(450, 450, 'particle', {
      x: { min: -200, max: 200 },
      speed: { min: 50, max: 100 },
      angle: { min: -100, max: -80 },
      scale: { start: 0.3, end: 0 },
      lifespan: 2000,
      quantity: 2,
      tint: [0x4ade80, 0x3b82f6, 0x8b5cf6],
      blendMode: 'ADD',
    });
  }
  
  private createProgressBar(): void {
    // –§–æ–Ω –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
    this.add.rectangle(450, 100, 600, 30, 0x333333, 0.8);
    
    // –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ update)
    this.progressFill = this.add.rectangle(150, 100, 0, 26, 0x4ade80);
    
    // –¢–µ–∫—Å—Ç –≤—Ä–µ–º–µ–Ω–∏
    this.timeText = this.add.text(450, 100, '', {
      fontSize: '14px',
      color: '#ffffff',
    }).setOrigin(0.5);
    
    // –¢–µ–∫—Å—Ç –¶–∏
    this.qiText = this.add.text(450, 150, '–¶–∏: +0', {
      fontSize: '18px',
      color: '#4ade80',
    }).setOrigin(0.5);
  }
  
  private createCancelButton(): void {
    const cancelBtn = this.add.text(450, 500, '[ –ü—Ä–µ—Ä–≤–∞—Ç—å –º–µ–¥–∏—Ç–∞—Ü–∏—é ]', {
      fontSize: '16px',
      color: '#ef4444',
    }).setOrigin(0.5);
    
    cancelBtn.setInteractive({ useHandCursor: true });
    cancelBtn.on('pointerdown', () => this.cancelMeditation());
    cancelBtn.on('pointerover', () => cancelBtn.setColor('#f87171'));
    cancelBtn.on('pointerout', () => cancelBtn.setColor('#ef4444'));
  }
  
  private async startMeditation(): Promise<void> {
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
    const result = await this.bridge.startMeditation(this.locationId, this.duration);
    
    if (result.interrupted) {
      this.handleInterruption(result);
      return;
    }
    
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
    const totalTime = this.duration * 60 * 1000; // –í —Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è (—É—Å–∫–æ—Ä–µ–Ω–æ –¥–ª—è –¥–µ–º–æ)
    const animTime = 5000; // 5 —Å–µ–∫—É–Ω–¥ –¥–ª—è –¥–µ–º–æ
    
    this.tweens.add({
      targets: this,
      progress: 1,
      duration: animTime,
      onUpdate: () => {
        this.updateProgress();
      },
      onComplete: () => {
        this.completeMeditation(result);
      },
    });
  }
  
  private updateProgress(): void {
    const width = 600 * this.progress;
    this.progressFill.width = width;
    
    const remainingMinutes = Math.ceil(this.duration * (1 - this.progress));
    this.timeText.setText(`${remainingMinutes} –º–∏–Ω.`);
    
    this.qiGained = Math.floor(this.duration * 2 * this.progress);
    this.qiText.setText(`–¶–∏: +${this.qiGained}`);
  }
  
  private async completeMeditation(result: unknown): Promise<void> {
    this.isComplete = true;
    
    // –≠—Ñ—Ñ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    this.cameras.main.flash(500, 100, 200, 255);
    
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    this.showResult(result);
    
    await new Promise<void>(resolve => {
      this.time.delayedCall(2000, resolve);
    });
    
    this.scene.start('LocationScene', { locationId: this.locationId });
  }
  
  private handleInterruption(result: { event: unknown }): void {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–±—ã—Ç–∏–µ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
    this.add.rectangle(450, 275, 900, 550, 0x000000, 0.7);
    
    this.add.text(450, 250, '‚ö†Ô∏è –ú–µ–¥–∏—Ç–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞!', {
      fontSize: '24px',
      color: '#fbbf24',
    }).setOrigin(0.5);
    
    // –û–ø—Ü–∏–∏
    // ...
  }
  
  private async cancelMeditation(): Promise<void> {
    if (this.isComplete) return;
    
    // –ß–∞—Å—Ç–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
    const result = await this.bridge.cancelMeditation();
    
    this.showResult(result);
    
    await new Promise<void>(resolve => {
      this.time.delayedCall(1000, resolve);
    });
    
    this.scene.start('LocationScene', { locationId: this.locationId });
  }
  
  private showResult(result: unknown): void {
    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏—Ç–æ–≥–∏
  }
}
```

### 6.2 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 6

- [ ] –°–æ–∑–¥–∞—Ç—å MeditationScene
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (—á–∞—Å—Ç–∏—Ü—ã, –∞—É—Ä–∞)
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- [ ] –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –¶–∏
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π
- [ ] –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å qi-system

---

## üì¶ –≠—Ç–∞–ø 7: Game Bridge Service (–î–µ–Ω—å 10)

### 7.1 –ú–æ—Å—Ç –º–µ–∂–¥—É Phaser –∏ API

```typescript
// src/services/game-bridge.service.ts

import Phaser from 'phaser';
import { db } from '@/lib/db';

export interface CombatResult {
  victory: boolean;
  damage: number;
  qiSpent: number;
  loot?: unknown;
  combatEnd: boolean;
}

export interface MeditationResult {
  qiGained: number;
  fatigueReduced: number;
  interrupted: boolean;
  event?: unknown;
}

class GameBridge {
  private static instance: GameBridge;
  private game: Phaser.Game | null = null;
  private sessionId: string | null = null;
  private characterId: string | null = null;
  
  private constructor() {}
  
  static getInstance(): GameBridge {
    if (!GameBridge.instance) {
      GameBridge.instance = new GameBridge();
    }
    return GameBridge.instance;
  }
  
  // === –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ===
  
  setGame(game: Phaser.Game): void {
    this.game = game;
  }
  
  setSessionId(sessionId: string): void {
    this.sessionId = sessionId;
  }
  
  setCharacterId(characterId: string): void {
    this.characterId = characterId;
  }
  
  // === –î–∞–Ω–Ω—ã–µ ===
  
  async getLocations(): Promise<Location[]> {
    const response = await fetch(`/api/map/locations?sessionId=${this.sessionId}`);
    return response.json();
  }
  
  async getLocation(locationId: string): Promise<Location> {
    const response = await fetch(`/api/location/${locationId}`);
    return response.json();
  }
  
  async getCharacter(): Promise<Character> {
    const response = await fetch(`/api/character/${this.characterId}`);
    return response.json();
  }
  
  async getNPCs(locationId: string): Promise<NPC[]> {
    const response = await fetch(`/api/npcs?locationId=${locationId}`);
    return response.json();
  }
  
  // === –î–µ–π—Å—Ç–≤–∏—è ===
  
  async sendAction(action: string): Promise<string> {
    const response = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        sessionId: this.sessionId,
        message: action,
      }),
    });
    
    const data = await response.json();
    return data.response.content;
  }
  
  async startMeditation(locationId: string, duration: number): Promise<MeditationResult> {
    const response = await fetch('/api/chat', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        sessionId: this.sessionId,
        message: `–º–µ–¥–∏—Ç–∏—Ä–æ–≤–∞—Ç—å ${duration} –º–∏–Ω—É—Ç`,
      }),
    });
    
    const data = await response.json();
    return {
      qiGained: data.response.characterState?.currentQi || 0,
      fatigueReduced: data.response.characterState?.fatigue || 0,
      interrupted: data.response.type === 'interruption',
      event: data.response.interruption,
    };
  }
  
  async cancelMeditation(): Promise<Partial<MeditationResult>> {
    // –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –º–µ–¥–∏—Ç–∞—Ü–∏–∏
    return { qiGained: 0, interrupted: true };
  }
  
  // === –ë–æ–π ===
  
  async initCombat(enemyId: string): Promise<CombatState> {
    const response = await fetch('/api/combat/init', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        characterId: this.characterId,
        enemyId,
      }),
    });
    
    return response.json();
  }
  
  async executeCombatAction(action: string): Promise<CombatResult> {
    const response = await fetch('/api/combat/action', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        characterId: this.characterId,
        action,
      }),
    });
    
    return response.json();
  }
  
  async getEnemyAction(): Promise<CombatResult> {
    const response = await fetch('/api/combat/enemy-action', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        characterId: this.characterId,
      }),
    });
    
    return response.json();
  }
  
  // === –ù–∞–≤–∏–≥–∞—Ü–∏—è ===
  
  setCurrentLocation(locationId: string): void {
    this.game?.events.emit('location-changed', locationId);
  }
  
  goToScene(sceneName: string, data?: object): void {
    this.game?.scene.start(sceneName, data);
  }
  
  toggleChat(): void {
    this.game?.events.emit('toggle-chat');
  }
  
  // === –°–æ–±—ã—Ç–∏—è ===
  
  on(event: string, callback: (...args: unknown[]) => void): void {
    this.game?.events.on(event, callback);
  }
  
  off(event: string, callback: (...args: unknown[]) => void): void {
    this.game?.events.off(event, callback);
  }
  
  emit(event: string, data?: unknown): void {
    this.game?.events.emit(event, data);
  }
}

export const gameBridge = GameBridge.getInstance();
```

### 7.2 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 7

- [ ] –°–æ–∑–¥–∞—Ç—å GameBridge singleton
- [ ] –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏
- [ ] –°–æ–±—ã—Ç–∏—è –¥–ª—è —Å–≤—è–∑–∏ —Å React
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

---

## üì¶ –≠—Ç–∞–ø 8: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å React UI (–î–Ω–∏ 11-12)

### 8.1 –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞

```typescript
// src/app/page.tsx

'use client';

import { useState, useEffect } from 'react';
import { GameContainer } from '@/components/game/GameContainer';
import { StatsPanel } from '@/components/panels/StatsPanel';
import { InventoryPanel } from '@/components/panels/InventoryPanel';
import { TechniquesPanel } from '@/components/panels/TechniquesPanel';
import { ChatPanel } from '@/components/panels/ChatPanel';
import { gameBridge } from '@/services/game-bridge.service';

export default function GamePage() {
  const [sessionId, setSessionId] = useState<string | null>(null);
  const [character, setCharacter] = useState<Character | null>(null);
  const [activePanel, setActivePanel] = useState<'stats' | 'inventory' | 'techniques' | 'chat'>('stats');
  
  useEffect(() => {
    // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–∏
    initSession();
    
    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
    gameBridge.on('state-updated', (state) => {
      setCharacter(prev => ({ ...prev, ...state }));
    });
  }, []);
  
  async function initSession() {
    const saved = localStorage.getItem('sessionId');
    if (saved) {
      setSessionId(saved);
      gameBridge.setSessionId(saved);
      
      const char = await gameBridge.getCharacter();
      setCharacter(char);
      gameBridge.setCharacterId(char.id);
    } else {
      // –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
      const response = await fetch('/api/game/start', {
        method: 'POST',
        body: JSON.stringify({ name: '–ò–≥—Ä–æ–∫' }),
      });
      const data = await response.json();
      
      setSessionId(data.sessionId);
      gameBridge.setSessionId(data.sessionId);
      gameBridge.setCharacterId(data.character.id);
      setCharacter(data.character);
      
      localStorage.setItem('sessionId', data.sessionId);
    }
  }
  
  if (!sessionId) {
    return <LoadingScreen />;
  }
  
  return (
    <main className="min-h-screen bg-background">
      <div className="flex h-screen">
        {/* –û—Å–Ω–æ–≤–Ω–∞—è –∏–≥—Ä–æ–≤–∞—è –æ–±–ª–∞—Å—Ç—å */}
        <div className="flex-1 p-4">
          <GameContainer 
            sessionId={sessionId}
            onStateChange={(state) => setCharacter(prev => ({ ...prev, ...state }))}
          />
        </div>
        
        {/* –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å */}
        <div className="w-80 border-l border-border flex flex-col">
          {/* –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –ø–∞–Ω–µ–ª–µ–π */}
          <div className="flex border-b border-border">
            {(['stats', 'inventory', 'techniques', 'chat'] as const).map(panel => (
              <button
                key={panel}
                onClick={() => setActivePanel(panel)}
                className={`flex-1 py-2 text-sm ${
                  activePanel === panel 
                    ? 'bg-primary text-primary-foreground' 
                    : 'hover:bg-muted'
                }`}
              >
                {panel === 'stats' && 'üìä'}
                {panel === 'inventory' && 'üéí'}
                {panel === 'techniques' && '‚öîÔ∏è'}
                {panel === 'chat' && 'üí¨'}
              </button>
            ))}
          </div>
          
          {/* –ö–æ–Ω—Ç–µ–Ω—Ç –ø–∞–Ω–µ–ª–∏ */}
          <div className="flex-1 overflow-auto">
            {activePanel === 'stats' && <StatsPanel character={character} />}
            {activePanel === 'inventory' && <InventoryPanel sessionId={sessionId} />}
            {activePanel === 'techniques' && <TechniquesPanel characterId={character?.id} />}
            {activePanel === 'chat' && <ChatPanel sessionId={sessionId} />}
          </div>
        </div>
      </div>
    </main>
  );
}
```

### 8.2 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 8

- [ ] –û–±–Ω–æ–≤–∏—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å GameContainer
- [ ] –°–≤—è–∑–∞—Ç—å React UI —Å Phaser
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
- [ ] –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω

---

## üì¶ –≠—Ç–∞–ø 9: –ê—Å—Å–µ—Ç—ã –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞ (–î–µ–Ω—å 13)

### 9.1 –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∞—Å—Å–µ—Ç–æ–≤

```
public/assets/
‚îú‚îÄ‚îÄ sprites/
‚îÇ   ‚îú‚îÄ‚îÄ player.png         # 32x32
‚îÇ   ‚îú‚îÄ‚îÄ npc.png            # 32x32
‚îÇ   ‚îú‚îÄ‚îÄ enemy.png          # 32x32
‚îÇ   ‚îú‚îÄ‚îÄ location-marker.png # 48x48
‚îÇ   ‚îî‚îÄ‚îÄ particle.png       # 8x8
‚îÇ
‚îú‚îÄ‚îÄ tiles/
‚îÇ   ‚îî‚îÄ‚îÄ (–¥–ª—è –±—É–¥—É—â–∏—Ö –∫–∞—Ä—Ç)
‚îÇ
‚îî‚îÄ‚îÄ ui/
    ‚îú‚îÄ‚îÄ button.png
    ‚îî‚îÄ‚îÄ panel.png
```

### 9.2 –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∞—Å—Å–µ—Ç–æ–≤

1. **Kenney.nl** ‚Äî –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ –∞—Å—Å–µ—Ç—ã (CC0)
2. **OpenGameArt.org** ‚Äî —Å–ø—Ä–∞–π—Ç—ã –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π
3. **Game-icons.net** ‚Äî –∏–∫–æ–Ω–∫–∏ –¥–ª—è UI
4. **–°–∞–º–æ–¥–µ–ª—å–Ω—ã–µ** ‚Äî –ø—Ä–æ—Å—Ç—ã–µ –≥–µ–æ–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ñ–æ—Ä–º—ã

### 9.3 –ß–µ–∫–ª–∏—Å—Ç –≠—Ç–∞–ø–∞ 9

- [ ] –°–æ–∑–¥–∞—Ç—å/—Å–∫–∞—á–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —Å–ø—Ä–∞–π—Ç—ã
- [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã
- [ ] –î–æ–±–∞–≤–∏—Ç—å fallback (—ç–º–æ–¥–∑–∏)
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö

---

## üìä –ò—Ç–æ–≥–æ–≤—ã–π —á–µ–∫–ª–∏—Å—Ç

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ ‚úÖ
- [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Phaser
- [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å TypeScript

### –≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤—ã–π Setup ‚úÖ
- [ ] game.config.ts
- [ ] BaseScene.ts
- [ ] GameContainer.tsx

### –≠—Ç–∞–ø 3: –ö–∞—Ä—Ç–∞ –º–∏—Ä–∞ ‚úÖ
- [ ] BootScene
- [ ] WorldScene
- [ ] –ú–∞—Ä–∫–µ—Ä—ã –ª–æ–∫–∞—Ü–∏–π

### –≠—Ç–∞–ø 4: –õ–æ–∫–∞—Ü–∏—è ‚úÖ
- [ ] LocationScene
- [ ] NPC –∏ —Ä–µ—Å—É—Ä—Å—ã
- [ ] –ú–µ–Ω—é –¥–µ–π—Å—Ç–≤–∏–π

### –≠—Ç–∞–ø 5: –ë–æ–π ‚úÖ
- [ ] CombatScene
- [ ] HP/–¶–∏ –±–∞—Ä—ã
- [ ] –ê–Ω–∏–º–∞—Ü–∏–∏

### –≠—Ç–∞–ø 6: –ú–µ–¥–∏—Ç–∞—Ü–∏—è ‚úÖ
- [ ] MeditationScene
- [ ] –≠—Ñ—Ñ–µ–∫—Ç—ã —á–∞—Å—Ç–∏—Ü
- [ ] –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä

### –≠—Ç–∞–ø 7: Game Bridge ‚úÖ
- [ ] API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ü–µ–Ω–∞–º–∏
- [ ] –°–æ–±—ã—Ç–∏—è

### –≠—Ç–∞–ø 8: React UI ‚úÖ
- [ ] –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- [ ] –ü–∞–Ω–µ–ª–∏
- [ ] –°–≤—è–∑—å —Å Phaser

### –≠—Ç–∞–ø 9: –ê—Å—Å–µ—Ç—ã ‚úÖ
- [ ] –°–ø—Ä–∞–π—Ç—ã
- [ ] UI —ç–ª–µ–º–µ–Ω—Ç—ã
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

---

## üìà –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ | –ü–æ—Å–ª–µ |
|---------|-----|-------|
| –í–∏–∑—É–∞–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å | –¢–µ–∫—Å—Ç | 2D –≥—Ä–∞—Ñ–∏–∫–∞ |
| –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å | –ù–∏–∑–∫–∞—è | –í—ã—Å–æ–∫–∞—è |
| –†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞ | ~500 KB | ~2 MB |
| –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ | 2-5 —Å–µ–∫ | 0.1-0.5 —Å–µ–∫ (–ª–æ–∫–∞–ª—å–Ω–æ) |
| –ü–æ–≥—Ä—É–∂–µ–Ω–∏–µ | –°—Ä–µ–¥–Ω–µ–µ | –í—ã—Å–æ–∫–æ–µ |

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–¢–∞–π–ª–æ–≤—ã–µ –∫–∞—Ä—Ç—ã** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Tiled –¥–ª—è –±–æ–ª—å—à–∏—Ö –º–∏—Ä–æ–≤
2. **–ê–Ω–∏–º–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π** ‚Äî —Ö–æ–¥—å–±–∞, –∞—Ç–∞–∫–∏, –º–µ–¥–∏—Ç–∞—Ü–∏—è
3. **–ó–≤—É–∫–∏** ‚Äî —Ñ–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞, —ç—Ñ—Ñ–µ–∫—Ç—ã
4. **–ú—É–ª—å—Ç–∏–ø–ª–µ–µ—Ä** ‚Äî WebSocket —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
5. **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è** ‚Äî touch —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: 2026-02-25*
*–í–µ—Ç–∫–∞: main2D*
