# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è Electron –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–∞—Ç–∞:** 2026-02-26
**–ü—Ä–æ–µ–∫—Ç:** Cultivation World Simulator
**–¢–µ–∫—É—â–∏–π —Å—Ç–µ–∫:** Next.js 16 + Phaser 3

---

## 1. –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§—Ä–æ–Ω—Ç–µ–Ω–¥
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Electron |
|-----------|------------|-------------------------|
| UI Framework | Next.js 16 App Router | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∞–¥–∞–ø—Ç–∞—Ü–∏–∏ |
| Game Engine | Phaser 3.90 | ‚úÖ –ü–æ–ª–Ω–∞—è |
| State Management | Zustand | ‚úÖ –ü–æ–ª–Ω–∞—è |
| UI Components | shadcn/ui + Radix | ‚úÖ –ü–æ–ª–Ω–∞—è |
| Styling | Tailwind CSS 4 | ‚úÖ –ü–æ–ª–Ω–∞—è |

### –ë—ç–∫–µ–Ω–¥
| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Electron |
|-----------|------------|-------------------------|
| Database | SQLite (Prisma) | ‚úÖ –ü–æ–ª–Ω–∞—è (–ª–æ–∫–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª) |
| API Routes | Next.js API | ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –≤ Electron main |
| LLM | z-ai-web-dev-sdk | ‚úÖ –ü–æ–ª–Ω–∞—è |

---

## 2. –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–æ–Ω—ã –¥–ª—è –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

#### 2.1 Next.js App Router
**–ü—Ä–æ–±–ª–µ–º–∞:** Next.js ‚Äî —Å–µ—Ä–≤–µ—Ä–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫, Electron ‚Äî –¥–µ—Å–∫—Ç–æ–ø–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

**–†–µ—à–µ–Ω–∏—è:**
1. **Vite + React** ‚Äî –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ —á–∏—Å—Ç—ã–π React —Å Vite
2. **Electron + Next.js** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å electron-next (–Ω–æ —ç—Ç–æ —É—Å–ª–æ–∂–Ω—è–µ—Ç —Å–±–æ—Ä–∫—É)
3. **Tauri** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Electron (–º–µ–Ω—å—à–µ —Ä–∞–∑–º–µ—Ä, –Ω–æ Rust)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ **Vite + React** –¥–ª—è —á–∏—Å—Ç–æ—Ç—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã.

#### 2.2 API Routes
**–ü—Ä–æ–±–ª–µ–º–∞:** `/api/*` –º–∞—Ä—à—Ä—É—Ç—ã ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–µ—Ä–Ω—ã–µ endpoint'—ã.

**–¢–µ–∫—É—â–∏–µ API:**
```
/api/game/start      ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã
/api/game/state      ‚Üí –°–æ—Å—Ç–æ—è–Ω–∏–µ
/api/game/save       ‚Üí –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
/api/meditation      ‚Üí –ú–µ–¥–∏—Ç–∞—Ü–∏—è
/api/chat            ‚Üí –ß–∞—Ç + LLM
/api/inventory/*     ‚Üí –ò–Ω–≤–µ–Ω—Ç–∞—Ä—å
/api/character/data  ‚Üí –î–∞–Ω–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞
```

**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –≤ Electron IPC handlers –∏–ª–∏ –≤ service layer –≤–Ω—É—Ç—Ä–∏ renderer.

### üü° –°—Ä–µ–¥–Ω–∏–µ

#### 2.3 Prisma –≤ Electron
**–ü—Ä–æ–±–ª–µ–º–∞:** Prisma —Ç—Ä–µ–±—É–µ—Ç —Å–±–æ—Ä–∫–∏ –ø–æ–¥ —Ü–µ–ª–µ–≤—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É.

**–†–µ—à–µ–Ω–∏–µ:** 
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `prisma generate` –¥–ª—è –∫–∞–∂–¥–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite —É–∂–µ –ª–æ–∫–∞–ª—å–Ω–∞—è ‚Äî –∏–¥–µ–∞–ª—å–Ω–æ –¥–ª—è Electron

#### 2.4 LLM Integration
**–¢–µ–∫—É—â–µ–µ:** z-ai-web-dev-sdk (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞)

**–î–ª—è –æ—Ñ—Ñ–ª–∞–π–Ω:**
- Ollama (–ª–æ–∫–∞–ª—å–Ω—ã–π LLM —Å–µ—Ä–≤–µ—Ä)
-.Embedded –º–æ–¥–µ–ª–∏ (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

### üü¢ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ

#### 2.5 Phaser 3
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

Phaser —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ, –≤ Electron renderer —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ.

#### 2.6 UI Components
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

shadcn/ui ‚Äî —á–∏—Å—Ç—ã–µ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Ä–∞–±–æ—Ç–∞—é—Ç –≤–µ–∑–¥–µ.

---

## 3. –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è Electron

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ

```json
{
  "electron": "^33.0.0",
  "electron-builder": "^25.0.0",
  "vite": "^6.0.0",
  "react": "^19.0.0",
  "react-dom": "^19.0.0",
  "phaser": "^3.90.0",
  "zustand": "^5.0.0",
  "prisma": "^6.0.0",
  "@prisma/client": "^6.0.0",
  "zod": "^4.0.0"
}
```

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ

```json
{
  "electron-updater": "^6.0.0",    // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  "electron-store": "^10.0.0",     // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
  "better-sqlite3": "^11.0.0"      // –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Prisma (–±—ã—Å—Ç—Ä–µ–µ)
}
```

---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

### 4.1 –ò–∑–±–µ–≥–∞—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```typescript
// ‚ùå –ü–õ–û–•–û - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç Next.js API
fetch('/api/meditation', { method: 'POST', body: ... })

// ‚úÖ –•–û–†–û–®–û - –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è —á–µ—Ä–µ–∑ service
import { meditationService } from '@/services/meditation.service';
await meditationService.perform(data);
```

### 4.2 –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å IPC –¥–ª—è Electron

```typescript
// renderer (React)
const result = await window.electronAPI.meditation(data);

// main (Electron)
ipcMain.handle('meditation', async (event, data) => {
  return await performMeditation(data);
});
```

### 4.3 –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ main/              # Electron main process (–ë–£–î–£–©–ï–ï)
‚îÇ   ‚îú‚îÄ‚îÄ ipc/          # IPC handlers
‚îÇ   ‚îî‚îÄ‚îÄ database/     # Prisma setup
‚îú‚îÄ‚îÄ renderer/          # React app (–¢–ï–ö–£–©–ï–ï)
‚îÇ   ‚îú‚îÄ‚îÄ components/   # UI
‚îÇ   ‚îú‚îÄ‚îÄ game/         # Phaser
‚îÇ   ‚îî‚îÄ‚îÄ stores/       # Zustand
‚îî‚îÄ‚îÄ shared/            # –û–±—â–∏–π –∫–æ–¥
    ‚îú‚îÄ‚îÄ services/     # Business logic
    ‚îú‚îÄ‚îÄ lib/          # Utilities
    ‚îî‚îÄ‚îÄ types/        # TypeScript
```

---

## 5. –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (—Ç–µ–∫—É—â–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- [x] –í—ã–Ω–µ—Å—Ç–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –≤ services
- [x] –ê–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å API –≤—ã–∑–æ–≤—ã
- [ ] –°–æ–∑–¥–∞—Ç—å –æ–±—â–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è renderer/main

### –§–∞–∑–∞ 2: Vite –º–∏–≥—Ä–∞—Ü–∏—è
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å Next.js –Ω–∞ Vite
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ pages –≤ —á–∏—Å—Ç—ã–π React Router
- [ ] –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ API routes –≤ services

### –§–∞–∑–∞ 3: Electron –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å Electron main process
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å IPC handlers
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö

### –§–∞–∑–∞ 4: –°–±–æ—Ä–∫–∞
- [ ] electron-builder –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [ ] –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- [ ] –ö–æ–¥–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å

---

## 6. –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –†–∞–∑–º–µ—Ä |
|-----------|--------|
| Electron runtime | ~180 MB |
| React + UI | ~5 MB |
| Phaser 3 | ~1.5 MB |
| Prisma + SQLite | ~10 MB |
| –ê—Å—Å–µ—Ç—ã (–µ—Å–ª–∏ –±—É–¥—É—Ç) | ~10-50 MB |
| **–ò—Ç–æ–≥–æ** | **~200-250 MB** |

---

## 7. –í—ã–≤–æ–¥—ã

### ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ:
- Phaser 3 ‚Äî —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ Electron
- SQLite ‚Äî –ª–æ–∫–∞–ª—å–Ω–∞—è –ë–î
- Zustand ‚Äî state management
- UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Äî —á–∏—Å—Ç—ã–π React

### ‚ö†Ô∏è –ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å:
- Next.js ‚Üí Vite + React Router
- API Routes ‚Üí Services + IPC
- –°–±–æ—Ä–∫–∞ ‚Üí electron-builder

### üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:
1. **–°–µ–π—á–∞—Å:** –ø–∏—Å–∞—Ç—å –∫–æ–¥ —Ç–∞–∫, —á—Ç–æ–±—ã –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –±—ã–ª–∞ –≤ services
2. **–ò–∑–±–µ–≥–∞—Ç—å:** —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ renderer
3. **–ê–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å:** –≤—Å–µ API –≤—ã–∑–æ–≤—ã —á–µ—Ä–µ–∑ –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

---

*–ê–Ω–∞–ª–∏–∑ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞ Electron*
